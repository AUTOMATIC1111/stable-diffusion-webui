{"version":3,"file":"StaticImage.svelte_svelte_type_style_lang.8bc35352.js","sources":["../../../../ui/packages/icons/src/Camera.svelte","../../../../ui/packages/icons/src/Circle.svelte","../../../../ui/packages/icons/src/Square.svelte","../../../../ui/packages/icons/src/Undo.svelte","../../../../ui/node_modules/.pnpm/cropperjs@1.5.12/node_modules/cropperjs/dist/cropper.esm.js","../../../../ui/node_modules/.pnpm/resize-observer-polyfill@1.5.1/node_modules/resize-observer-polyfill/dist/ResizeObserver.es.js","../../../../ui/packages/image/src/Webcam.svelte"],"sourcesContent":["<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\twidth=\"100%\"\n\theight=\"100%\"\n\tviewBox=\"0 0 24 24\"\n\tfill=\"none\"\n\tstroke=\"currentColor\"\n\tstroke-width=\"1.5\"\n\tstroke-linecap=\"round\"\n\tstroke-linejoin=\"round\"\n\tclass=\"feather feather-camera\"\n>\n\t<path\n\t\td=\"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z\"\n\t/>\n\t<circle cx=\"12\" cy=\"13\" r=\"4\" />\n</svg>\n","<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\twidth=\"100%\"\n\theight=\"100%\"\n\tviewBox=\"0 0 24 24\"\n\tfill=\"red\"\n\tstroke=\"red\"\n\tstroke-width=\"1.5\"\n\tstroke-linecap=\"round\"\n\tstroke-linejoin=\"round\"\n\tclass=\"feather feather-circle\"\n>\n\t<circle cx=\"12\" cy=\"12\" r=\"10\" />\n</svg>\n","<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\twidth=\"100%\"\n\theight=\"100%\"\n\tviewBox=\"0 0 24 24\"\n\tfill=\"red\"\n\tstroke=\"red\"\n\tstroke-width=\"1.5\"\n\tstroke-linecap=\"round\"\n\tstroke-linejoin=\"round\"\n\tclass=\"feather feather-square\"\n>\n\t<rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\" />\n</svg>\n","<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\twidth=\"100%\"\n\theight=\"100%\"\n\tviewBox=\"0 0 24 24\"\n\tfill=\"none\"\n\tstroke=\"currentColor\"\n\tstroke-width=\"1.5\"\n\tstroke-linecap=\"round\"\n\tstroke-linejoin=\"round\"\n\tclass=\"feather feather-rotate-ccw\"\n>\n\t<polyline points=\"1 4 1 10 7 10\" />\n\t<path d=\"M3.51 15a9 9 0 1 0 2.13-9.36L1 10\" />\n</svg>\n","/*!\n * Cropper.js v1.5.12\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2021-06-12T08:00:17.411Z\n */\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\nvar WINDOW = IS_BROWSER ? window : {};\nvar IS_TOUCH_DEVICE = IS_BROWSER && WINDOW.document.documentElement ? 'ontouchstart' in WINDOW.document.documentElement : false;\nvar HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;\nvar NAMESPACE = 'cropper'; // Actions\n\nvar ACTION_ALL = 'all';\nvar ACTION_CROP = 'crop';\nvar ACTION_MOVE = 'move';\nvar ACTION_ZOOM = 'zoom';\nvar ACTION_EAST = 'e';\nvar ACTION_WEST = 'w';\nvar ACTION_SOUTH = 's';\nvar ACTION_NORTH = 'n';\nvar ACTION_NORTH_EAST = 'ne';\nvar ACTION_NORTH_WEST = 'nw';\nvar ACTION_SOUTH_EAST = 'se';\nvar ACTION_SOUTH_WEST = 'sw'; // Classes\n\nvar CLASS_CROP = \"\".concat(NAMESPACE, \"-crop\");\nvar CLASS_DISABLED = \"\".concat(NAMESPACE, \"-disabled\");\nvar CLASS_HIDDEN = \"\".concat(NAMESPACE, \"-hidden\");\nvar CLASS_HIDE = \"\".concat(NAMESPACE, \"-hide\");\nvar CLASS_INVISIBLE = \"\".concat(NAMESPACE, \"-invisible\");\nvar CLASS_MODAL = \"\".concat(NAMESPACE, \"-modal\");\nvar CLASS_MOVE = \"\".concat(NAMESPACE, \"-move\"); // Data keys\n\nvar DATA_ACTION = \"\".concat(NAMESPACE, \"Action\");\nvar DATA_PREVIEW = \"\".concat(NAMESPACE, \"Preview\"); // Drag modes\n\nvar DRAG_MODE_CROP = 'crop';\nvar DRAG_MODE_MOVE = 'move';\nvar DRAG_MODE_NONE = 'none'; // Events\n\nvar EVENT_CROP = 'crop';\nvar EVENT_CROP_END = 'cropend';\nvar EVENT_CROP_MOVE = 'cropmove';\nvar EVENT_CROP_START = 'cropstart';\nvar EVENT_DBLCLICK = 'dblclick';\nvar EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';\nvar EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';\nvar EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';\nvar EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;\nvar EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;\nvar EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;\nvar EVENT_READY = 'ready';\nvar EVENT_RESIZE = 'resize';\nvar EVENT_WHEEL = 'wheel';\nvar EVENT_ZOOM = 'zoom'; // Mime types\n\nvar MIME_TYPE_JPEG = 'image/jpeg'; // RegExps\n\nvar REGEXP_ACTIONS = /^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/;\nvar REGEXP_DATA_URL = /^data:/;\nvar REGEXP_DATA_URL_JPEG = /^data:image\\/jpeg;base64,/;\nvar REGEXP_TAG_NAME = /^img|canvas$/i; // Misc\n// Inspired by the default width and height of a canvas element.\n\nvar MIN_CONTAINER_WIDTH = 200;\nvar MIN_CONTAINER_HEIGHT = 100;\n\nvar DEFAULTS = {\n  // Define the view mode of the cropper\n  viewMode: 0,\n  // 0, 1, 2, 3\n  // Define the dragging mode of the cropper\n  dragMode: DRAG_MODE_CROP,\n  // 'crop', 'move' or 'none'\n  // Define the initial aspect ratio of the crop box\n  initialAspectRatio: NaN,\n  // Define the aspect ratio of the crop box\n  aspectRatio: NaN,\n  // An object with the previous cropping result data\n  data: null,\n  // A selector for adding extra containers to preview\n  preview: '',\n  // Re-render the cropper when resize the window\n  responsive: true,\n  // Restore the cropped area after resize the window\n  restore: true,\n  // Check if the current image is a cross-origin image\n  checkCrossOrigin: true,\n  // Check the current image's Exif Orientation information\n  checkOrientation: true,\n  // Show the black modal\n  modal: true,\n  // Show the dashed lines for guiding\n  guides: true,\n  // Show the center indicator for guiding\n  center: true,\n  // Show the white modal to highlight the crop box\n  highlight: true,\n  // Show the grid background\n  background: true,\n  // Enable to crop the image automatically when initialize\n  autoCrop: true,\n  // Define the percentage of automatic cropping area when initializes\n  autoCropArea: 0.8,\n  // Enable to move the image\n  movable: true,\n  // Enable to rotate the image\n  rotatable: true,\n  // Enable to scale the image\n  scalable: true,\n  // Enable to zoom the image\n  zoomable: true,\n  // Enable to zoom the image by dragging touch\n  zoomOnTouch: true,\n  // Enable to zoom the image by wheeling mouse\n  zoomOnWheel: true,\n  // Define zoom ratio when zoom the image by wheeling mouse\n  wheelZoomRatio: 0.1,\n  // Enable to move the crop box\n  cropBoxMovable: true,\n  // Enable to resize the crop box\n  cropBoxResizable: true,\n  // Toggle drag mode between \"crop\" and \"move\" when click twice on the cropper\n  toggleDragModeOnDblclick: true,\n  // Size limitation\n  minCanvasWidth: 0,\n  minCanvasHeight: 0,\n  minCropBoxWidth: 0,\n  minCropBoxHeight: 0,\n  minContainerWidth: MIN_CONTAINER_WIDTH,\n  minContainerHeight: MIN_CONTAINER_HEIGHT,\n  // Shortcuts of events\n  ready: null,\n  cropstart: null,\n  cropmove: null,\n  cropend: null,\n  crop: null,\n  zoom: null\n};\n\nvar TEMPLATE = '<div class=\"cropper-container\" touch-action=\"none\">' + '<div class=\"cropper-wrap-box\">' + '<div class=\"cropper-canvas\"></div>' + '</div>' + '<div class=\"cropper-drag-box\"></div>' + '<div class=\"cropper-crop-box\">' + '<span class=\"cropper-view-box\"></span>' + '<span class=\"cropper-dashed dashed-h\"></span>' + '<span class=\"cropper-dashed dashed-v\"></span>' + '<span class=\"cropper-center\"></span>' + '<span class=\"cropper-face\"></span>' + '<span class=\"cropper-line line-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-line line-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-line line-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-line line-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-point point-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-point point-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-point point-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-ne\" data-cropper-action=\"ne\"></span>' + '<span class=\"cropper-point point-nw\" data-cropper-action=\"nw\"></span>' + '<span class=\"cropper-point point-sw\" data-cropper-action=\"sw\"></span>' + '<span class=\"cropper-point point-se\" data-cropper-action=\"se\"></span>' + '</div>' + '</div>';\n\n/**\n * Check if the given value is not a number.\n */\n\nvar isNaN = Number.isNaN || WINDOW.isNaN;\n/**\n * Check if the given value is a number.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n */\n\nfunction isNumber(value) {\n  return typeof value === 'number' && !isNaN(value);\n}\n/**\n * Check if the given value is a positive number.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a positive number, else `false`.\n */\n\nvar isPositiveNumber = function isPositiveNumber(value) {\n  return value > 0 && value < Infinity;\n};\n/**\n * Check if the given value is undefined.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n */\n\nfunction isUndefined(value) {\n  return typeof value === 'undefined';\n}\n/**\n * Check if the given value is an object.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n */\n\nfunction isObject(value) {\n  return _typeof(value) === 'object' && value !== null;\n}\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n/**\n * Check if the given value is a plain object.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n */\n\nfunction isPlainObject(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n\n  try {\n    var _constructor = value.constructor;\n    var prototype = _constructor.prototype;\n    return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n  } catch (error) {\n    return false;\n  }\n}\n/**\n * Check if the given value is a function.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n */\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\nvar slice = Array.prototype.slice;\n/**\n * Convert array-like or iterable object to an array.\n * @param {*} value - The value to convert.\n * @returns {Array} Returns a new array.\n */\n\nfunction toArray(value) {\n  return Array.from ? Array.from(value) : slice.call(value);\n}\n/**\n * Iterate the given data.\n * @param {*} data - The data to iterate.\n * @param {Function} callback - The process function for each element.\n * @returns {*} The original data.\n */\n\nfunction forEach(data, callback) {\n  if (data && isFunction(callback)) {\n    if (Array.isArray(data) || isNumber(data.length)\n    /* array-like */\n    ) {\n        toArray(data).forEach(function (value, key) {\n          callback.call(data, value, key, data);\n        });\n      } else if (isObject(data)) {\n      Object.keys(data).forEach(function (key) {\n        callback.call(data, data[key], key, data);\n      });\n    }\n  }\n\n  return data;\n}\n/**\n * Extend the given object.\n * @param {*} target - The target object to extend.\n * @param {*} args - The rest objects for merging to the target object.\n * @returns {Object} The extended object.\n */\n\nvar assign = Object.assign || function assign(target) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  if (isObject(target) && args.length > 0) {\n    args.forEach(function (arg) {\n      if (isObject(arg)) {\n        Object.keys(arg).forEach(function (key) {\n          target[key] = arg[key];\n        });\n      }\n    });\n  }\n\n  return target;\n};\nvar REGEXP_DECIMALS = /\\.\\d*(?:0|9){12}\\d*$/;\n/**\n * Normalize decimal number.\n * Check out {@link https://0.30000000000000004.com/}\n * @param {number} value - The value to normalize.\n * @param {number} [times=100000000000] - The times for normalizing.\n * @returns {number} Returns the normalized number.\n */\n\nfunction normalizeDecimalNumber(value) {\n  var times = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100000000000;\n  return REGEXP_DECIMALS.test(value) ? Math.round(value * times) / times : value;\n}\nvar REGEXP_SUFFIX = /^width|height|left|top|marginLeft|marginTop$/;\n/**\n * Apply styles to the given element.\n * @param {Element} element - The target element.\n * @param {Object} styles - The styles for applying.\n */\n\nfunction setStyle(element, styles) {\n  var style = element.style;\n  forEach(styles, function (value, property) {\n    if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n      value = \"\".concat(value, \"px\");\n    }\n\n    style[property] = value;\n  });\n}\n/**\n * Check if the given element has a special class.\n * @param {Element} element - The element to check.\n * @param {string} value - The class to search.\n * @returns {boolean} Returns `true` if the special class was found.\n */\n\nfunction hasClass(element, value) {\n  return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n}\n/**\n * Add classes to the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be added.\n */\n\nfunction addClass(element, value) {\n  if (!value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    forEach(element, function (elem) {\n      addClass(elem, value);\n    });\n    return;\n  }\n\n  if (element.classList) {\n    element.classList.add(value);\n    return;\n  }\n\n  var className = element.className.trim();\n\n  if (!className) {\n    element.className = value;\n  } else if (className.indexOf(value) < 0) {\n    element.className = \"\".concat(className, \" \").concat(value);\n  }\n}\n/**\n * Remove classes from the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be removed.\n */\n\nfunction removeClass(element, value) {\n  if (!value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    forEach(element, function (elem) {\n      removeClass(elem, value);\n    });\n    return;\n  }\n\n  if (element.classList) {\n    element.classList.remove(value);\n    return;\n  }\n\n  if (element.className.indexOf(value) >= 0) {\n    element.className = element.className.replace(value, '');\n  }\n}\n/**\n * Add or remove classes from the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be toggled.\n * @param {boolean} added - Add only.\n */\n\nfunction toggleClass(element, value, added) {\n  if (!value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    forEach(element, function (elem) {\n      toggleClass(elem, value, added);\n    });\n    return;\n  } // IE10-11 doesn't support the second parameter of `classList.toggle`\n\n\n  if (added) {\n    addClass(element, value);\n  } else {\n    removeClass(element, value);\n  }\n}\nvar REGEXP_CAMEL_CASE = /([a-z\\d])([A-Z])/g;\n/**\n * Transform the given string from camelCase to kebab-case\n * @param {string} value - The value to transform.\n * @returns {string} The transformed value.\n */\n\nfunction toParamCase(value) {\n  return value.replace(REGEXP_CAMEL_CASE, '$1-$2').toLowerCase();\n}\n/**\n * Get data from the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to get.\n * @returns {string} The data value.\n */\n\nfunction getData(element, name) {\n  if (isObject(element[name])) {\n    return element[name];\n  }\n\n  if (element.dataset) {\n    return element.dataset[name];\n  }\n\n  return element.getAttribute(\"data-\".concat(toParamCase(name)));\n}\n/**\n * Set data to the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to set.\n * @param {string} data - The data value.\n */\n\nfunction setData(element, name, data) {\n  if (isObject(data)) {\n    element[name] = data;\n  } else if (element.dataset) {\n    element.dataset[name] = data;\n  } else {\n    element.setAttribute(\"data-\".concat(toParamCase(name)), data);\n  }\n}\n/**\n * Remove data from the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to remove.\n */\n\nfunction removeData(element, name) {\n  if (isObject(element[name])) {\n    try {\n      delete element[name];\n    } catch (error) {\n      element[name] = undefined;\n    }\n  } else if (element.dataset) {\n    // #128 Safari not allows to delete dataset property\n    try {\n      delete element.dataset[name];\n    } catch (error) {\n      element.dataset[name] = undefined;\n    }\n  } else {\n    element.removeAttribute(\"data-\".concat(toParamCase(name)));\n  }\n}\nvar REGEXP_SPACES = /\\s\\s*/;\n\nvar onceSupported = function () {\n  var supported = false;\n\n  if (IS_BROWSER) {\n    var once = false;\n\n    var listener = function listener() {};\n\n    var options = Object.defineProperty({}, 'once', {\n      get: function get() {\n        supported = true;\n        return once;\n      },\n\n      /**\n       * This setter can fix a `TypeError` in strict mode\n       * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n       * @param {boolean} value - The value to set\n       */\n      set: function set(value) {\n        once = value;\n      }\n    });\n    WINDOW.addEventListener('test', listener, options);\n    WINDOW.removeEventListener('test', listener, options);\n  }\n\n  return supported;\n}();\n/**\n * Remove event listener from the target element.\n * @param {Element} element - The event target.\n * @param {string} type - The event type(s).\n * @param {Function} listener - The event listener.\n * @param {Object} options - The event options.\n */\n\n\nfunction removeListener(element, type, listener) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var handler = listener;\n  type.trim().split(REGEXP_SPACES).forEach(function (event) {\n    if (!onceSupported) {\n      var listeners = element.listeners;\n\n      if (listeners && listeners[event] && listeners[event][listener]) {\n        handler = listeners[event][listener];\n        delete listeners[event][listener];\n\n        if (Object.keys(listeners[event]).length === 0) {\n          delete listeners[event];\n        }\n\n        if (Object.keys(listeners).length === 0) {\n          delete element.listeners;\n        }\n      }\n    }\n\n    element.removeEventListener(event, handler, options);\n  });\n}\n/**\n * Add event listener to the target element.\n * @param {Element} element - The event target.\n * @param {string} type - The event type(s).\n * @param {Function} listener - The event listener.\n * @param {Object} options - The event options.\n */\n\nfunction addListener(element, type, listener) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var _handler = listener;\n  type.trim().split(REGEXP_SPACES).forEach(function (event) {\n    if (options.once && !onceSupported) {\n      var _element$listeners = element.listeners,\n          listeners = _element$listeners === void 0 ? {} : _element$listeners;\n\n      _handler = function handler() {\n        delete listeners[event][listener];\n        element.removeEventListener(event, _handler, options);\n\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n\n        listener.apply(element, args);\n      };\n\n      if (!listeners[event]) {\n        listeners[event] = {};\n      }\n\n      if (listeners[event][listener]) {\n        element.removeEventListener(event, listeners[event][listener], options);\n      }\n\n      listeners[event][listener] = _handler;\n      element.listeners = listeners;\n    }\n\n    element.addEventListener(event, _handler, options);\n  });\n}\n/**\n * Dispatch event on the target element.\n * @param {Element} element - The event target.\n * @param {string} type - The event type(s).\n * @param {Object} data - The additional event data.\n * @returns {boolean} Indicate if the event is default prevented or not.\n */\n\nfunction dispatchEvent(element, type, data) {\n  var event; // Event and CustomEvent on IE9-11 are global objects, not constructors\n\n  if (isFunction(Event) && isFunction(CustomEvent)) {\n    event = new CustomEvent(type, {\n      detail: data,\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(type, true, true, data);\n  }\n\n  return element.dispatchEvent(event);\n}\n/**\n * Get the offset base on the document.\n * @param {Element} element - The target element.\n * @returns {Object} The offset data.\n */\n\nfunction getOffset(element) {\n  var box = element.getBoundingClientRect();\n  return {\n    left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n    top: box.top + (window.pageYOffset - document.documentElement.clientTop)\n  };\n}\nvar location = WINDOW.location;\nvar REGEXP_ORIGINS = /^(\\w+:)\\/\\/([^:/?#]*):?(\\d*)/i;\n/**\n * Check if the given URL is a cross origin URL.\n * @param {string} url - The target URL.\n * @returns {boolean} Returns `true` if the given URL is a cross origin URL, else `false`.\n */\n\nfunction isCrossOriginURL(url) {\n  var parts = url.match(REGEXP_ORIGINS);\n  return parts !== null && (parts[1] !== location.protocol || parts[2] !== location.hostname || parts[3] !== location.port);\n}\n/**\n * Add timestamp to the given URL.\n * @param {string} url - The target URL.\n * @returns {string} The result URL.\n */\n\nfunction addTimestamp(url) {\n  var timestamp = \"timestamp=\".concat(new Date().getTime());\n  return url + (url.indexOf('?') === -1 ? '?' : '&') + timestamp;\n}\n/**\n * Get transforms base on the given object.\n * @param {Object} obj - The target object.\n * @returns {string} A string contains transform values.\n */\n\nfunction getTransforms(_ref) {\n  var rotate = _ref.rotate,\n      scaleX = _ref.scaleX,\n      scaleY = _ref.scaleY,\n      translateX = _ref.translateX,\n      translateY = _ref.translateY;\n  var values = [];\n\n  if (isNumber(translateX) && translateX !== 0) {\n    values.push(\"translateX(\".concat(translateX, \"px)\"));\n  }\n\n  if (isNumber(translateY) && translateY !== 0) {\n    values.push(\"translateY(\".concat(translateY, \"px)\"));\n  } // Rotate should come first before scale to match orientation transform\n\n\n  if (isNumber(rotate) && rotate !== 0) {\n    values.push(\"rotate(\".concat(rotate, \"deg)\"));\n  }\n\n  if (isNumber(scaleX) && scaleX !== 1) {\n    values.push(\"scaleX(\".concat(scaleX, \")\"));\n  }\n\n  if (isNumber(scaleY) && scaleY !== 1) {\n    values.push(\"scaleY(\".concat(scaleY, \")\"));\n  }\n\n  var transform = values.length ? values.join(' ') : 'none';\n  return {\n    WebkitTransform: transform,\n    msTransform: transform,\n    transform: transform\n  };\n}\n/**\n * Get the max ratio of a group of pointers.\n * @param {string} pointers - The target pointers.\n * @returns {number} The result ratio.\n */\n\nfunction getMaxZoomRatio(pointers) {\n  var pointers2 = _objectSpread2({}, pointers);\n\n  var maxRatio = 0;\n  forEach(pointers, function (pointer, pointerId) {\n    delete pointers2[pointerId];\n    forEach(pointers2, function (pointer2) {\n      var x1 = Math.abs(pointer.startX - pointer2.startX);\n      var y1 = Math.abs(pointer.startY - pointer2.startY);\n      var x2 = Math.abs(pointer.endX - pointer2.endX);\n      var y2 = Math.abs(pointer.endY - pointer2.endY);\n      var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n      var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n      var ratio = (z2 - z1) / z1;\n\n      if (Math.abs(ratio) > Math.abs(maxRatio)) {\n        maxRatio = ratio;\n      }\n    });\n  });\n  return maxRatio;\n}\n/**\n * Get a pointer from an event object.\n * @param {Object} event - The target event object.\n * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n * @returns {Object} The result pointer contains start and/or end point coordinates.\n */\n\nfunction getPointer(_ref2, endOnly) {\n  var pageX = _ref2.pageX,\n      pageY = _ref2.pageY;\n  var end = {\n    endX: pageX,\n    endY: pageY\n  };\n  return endOnly ? end : _objectSpread2({\n    startX: pageX,\n    startY: pageY\n  }, end);\n}\n/**\n * Get the center point coordinate of a group of pointers.\n * @param {Object} pointers - The target pointers.\n * @returns {Object} The center point coordinate.\n */\n\nfunction getPointersCenter(pointers) {\n  var pageX = 0;\n  var pageY = 0;\n  var count = 0;\n  forEach(pointers, function (_ref3) {\n    var startX = _ref3.startX,\n        startY = _ref3.startY;\n    pageX += startX;\n    pageY += startY;\n    count += 1;\n  });\n  pageX /= count;\n  pageY /= count;\n  return {\n    pageX: pageX,\n    pageY: pageY\n  };\n}\n/**\n * Get the max sizes in a rectangle under the given aspect ratio.\n * @param {Object} data - The original sizes.\n * @param {string} [type='contain'] - The adjust type.\n * @returns {Object} The result sizes.\n */\n\nfunction getAdjustedSizes(_ref4) // or 'cover'\n{\n  var aspectRatio = _ref4.aspectRatio,\n      height = _ref4.height,\n      width = _ref4.width;\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'contain';\n  var isValidWidth = isPositiveNumber(width);\n  var isValidHeight = isPositiveNumber(height);\n\n  if (isValidWidth && isValidHeight) {\n    var adjustedWidth = height * aspectRatio;\n\n    if (type === 'contain' && adjustedWidth > width || type === 'cover' && adjustedWidth < width) {\n      height = width / aspectRatio;\n    } else {\n      width = height * aspectRatio;\n    }\n  } else if (isValidWidth) {\n    height = width / aspectRatio;\n  } else if (isValidHeight) {\n    width = height * aspectRatio;\n  }\n\n  return {\n    width: width,\n    height: height\n  };\n}\n/**\n * Get the new sizes of a rectangle after rotated.\n * @param {Object} data - The original sizes.\n * @returns {Object} The result sizes.\n */\n\nfunction getRotatedSizes(_ref5) {\n  var width = _ref5.width,\n      height = _ref5.height,\n      degree = _ref5.degree;\n  degree = Math.abs(degree) % 180;\n\n  if (degree === 90) {\n    return {\n      width: height,\n      height: width\n    };\n  }\n\n  var arc = degree % 90 * Math.PI / 180;\n  var sinArc = Math.sin(arc);\n  var cosArc = Math.cos(arc);\n  var newWidth = width * cosArc + height * sinArc;\n  var newHeight = width * sinArc + height * cosArc;\n  return degree > 90 ? {\n    width: newHeight,\n    height: newWidth\n  } : {\n    width: newWidth,\n    height: newHeight\n  };\n}\n/**\n * Get a canvas which drew the given image.\n * @param {HTMLImageElement} image - The image for drawing.\n * @param {Object} imageData - The image data.\n * @param {Object} canvasData - The canvas data.\n * @param {Object} options - The options.\n * @returns {HTMLCanvasElement} The result canvas.\n */\n\nfunction getSourceCanvas(image, _ref6, _ref7, _ref8) {\n  var imageAspectRatio = _ref6.aspectRatio,\n      imageNaturalWidth = _ref6.naturalWidth,\n      imageNaturalHeight = _ref6.naturalHeight,\n      _ref6$rotate = _ref6.rotate,\n      rotate = _ref6$rotate === void 0 ? 0 : _ref6$rotate,\n      _ref6$scaleX = _ref6.scaleX,\n      scaleX = _ref6$scaleX === void 0 ? 1 : _ref6$scaleX,\n      _ref6$scaleY = _ref6.scaleY,\n      scaleY = _ref6$scaleY === void 0 ? 1 : _ref6$scaleY;\n  var aspectRatio = _ref7.aspectRatio,\n      naturalWidth = _ref7.naturalWidth,\n      naturalHeight = _ref7.naturalHeight;\n  var _ref8$fillColor = _ref8.fillColor,\n      fillColor = _ref8$fillColor === void 0 ? 'transparent' : _ref8$fillColor,\n      _ref8$imageSmoothingE = _ref8.imageSmoothingEnabled,\n      imageSmoothingEnabled = _ref8$imageSmoothingE === void 0 ? true : _ref8$imageSmoothingE,\n      _ref8$imageSmoothingQ = _ref8.imageSmoothingQuality,\n      imageSmoothingQuality = _ref8$imageSmoothingQ === void 0 ? 'low' : _ref8$imageSmoothingQ,\n      _ref8$maxWidth = _ref8.maxWidth,\n      maxWidth = _ref8$maxWidth === void 0 ? Infinity : _ref8$maxWidth,\n      _ref8$maxHeight = _ref8.maxHeight,\n      maxHeight = _ref8$maxHeight === void 0 ? Infinity : _ref8$maxHeight,\n      _ref8$minWidth = _ref8.minWidth,\n      minWidth = _ref8$minWidth === void 0 ? 0 : _ref8$minWidth,\n      _ref8$minHeight = _ref8.minHeight,\n      minHeight = _ref8$minHeight === void 0 ? 0 : _ref8$minHeight;\n  var canvas = document.createElement('canvas');\n  var context = canvas.getContext('2d');\n  var maxSizes = getAdjustedSizes({\n    aspectRatio: aspectRatio,\n    width: maxWidth,\n    height: maxHeight\n  });\n  var minSizes = getAdjustedSizes({\n    aspectRatio: aspectRatio,\n    width: minWidth,\n    height: minHeight\n  }, 'cover');\n  var width = Math.min(maxSizes.width, Math.max(minSizes.width, naturalWidth));\n  var height = Math.min(maxSizes.height, Math.max(minSizes.height, naturalHeight)); // Note: should always use image's natural sizes for drawing as\n  // imageData.naturalWidth === canvasData.naturalHeight when rotate % 180 === 90\n\n  var destMaxSizes = getAdjustedSizes({\n    aspectRatio: imageAspectRatio,\n    width: maxWidth,\n    height: maxHeight\n  });\n  var destMinSizes = getAdjustedSizes({\n    aspectRatio: imageAspectRatio,\n    width: minWidth,\n    height: minHeight\n  }, 'cover');\n  var destWidth = Math.min(destMaxSizes.width, Math.max(destMinSizes.width, imageNaturalWidth));\n  var destHeight = Math.min(destMaxSizes.height, Math.max(destMinSizes.height, imageNaturalHeight));\n  var params = [-destWidth / 2, -destHeight / 2, destWidth, destHeight];\n  canvas.width = normalizeDecimalNumber(width);\n  canvas.height = normalizeDecimalNumber(height);\n  context.fillStyle = fillColor;\n  context.fillRect(0, 0, width, height);\n  context.save();\n  context.translate(width / 2, height / 2);\n  context.rotate(rotate * Math.PI / 180);\n  context.scale(scaleX, scaleY);\n  context.imageSmoothingEnabled = imageSmoothingEnabled;\n  context.imageSmoothingQuality = imageSmoothingQuality;\n  context.drawImage.apply(context, [image].concat(_toConsumableArray(params.map(function (param) {\n    return Math.floor(normalizeDecimalNumber(param));\n  }))));\n  context.restore();\n  return canvas;\n}\nvar fromCharCode = String.fromCharCode;\n/**\n * Get string from char code in data view.\n * @param {DataView} dataView - The data view for read.\n * @param {number} start - The start index.\n * @param {number} length - The read length.\n * @returns {string} The read result.\n */\n\nfunction getStringFromCharCode(dataView, start, length) {\n  var str = '';\n  length += start;\n\n  for (var i = start; i < length; i += 1) {\n    str += fromCharCode(dataView.getUint8(i));\n  }\n\n  return str;\n}\nvar REGEXP_DATA_URL_HEAD = /^data:.*,/;\n/**\n * Transform Data URL to array buffer.\n * @param {string} dataURL - The Data URL to transform.\n * @returns {ArrayBuffer} The result array buffer.\n */\n\nfunction dataURLToArrayBuffer(dataURL) {\n  var base64 = dataURL.replace(REGEXP_DATA_URL_HEAD, '');\n  var binary = atob(base64);\n  var arrayBuffer = new ArrayBuffer(binary.length);\n  var uint8 = new Uint8Array(arrayBuffer);\n  forEach(uint8, function (value, i) {\n    uint8[i] = binary.charCodeAt(i);\n  });\n  return arrayBuffer;\n}\n/**\n * Transform array buffer to Data URL.\n * @param {ArrayBuffer} arrayBuffer - The array buffer to transform.\n * @param {string} mimeType - The mime type of the Data URL.\n * @returns {string} The result Data URL.\n */\n\nfunction arrayBufferToDataURL(arrayBuffer, mimeType) {\n  var chunks = []; // Chunk Typed Array for better performance (#435)\n\n  var chunkSize = 8192;\n  var uint8 = new Uint8Array(arrayBuffer);\n\n  while (uint8.length > 0) {\n    // XXX: Babel's `toConsumableArray` helper will throw error in IE or Safari 9\n    // eslint-disable-next-line prefer-spread\n    chunks.push(fromCharCode.apply(null, toArray(uint8.subarray(0, chunkSize))));\n    uint8 = uint8.subarray(chunkSize);\n  }\n\n  return \"data:\".concat(mimeType, \";base64,\").concat(btoa(chunks.join('')));\n}\n/**\n * Get orientation value from given array buffer.\n * @param {ArrayBuffer} arrayBuffer - The array buffer to read.\n * @returns {number} The read orientation value.\n */\n\nfunction resetAndGetOrientation(arrayBuffer) {\n  var dataView = new DataView(arrayBuffer);\n  var orientation; // Ignores range error when the image does not have correct Exif information\n\n  try {\n    var littleEndian;\n    var app1Start;\n    var ifdStart; // Only handle JPEG image (start by 0xFFD8)\n\n    if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\n      var length = dataView.byteLength;\n      var offset = 2;\n\n      while (offset + 1 < length) {\n        if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\n          app1Start = offset;\n          break;\n        }\n\n        offset += 1;\n      }\n    }\n\n    if (app1Start) {\n      var exifIDCode = app1Start + 4;\n      var tiffOffset = app1Start + 10;\n\n      if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n        var endianness = dataView.getUint16(tiffOffset);\n        littleEndian = endianness === 0x4949;\n\n        if (littleEndian || endianness === 0x4D4D\n        /* bigEndian */\n        ) {\n            if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\n              var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n\n              if (firstIFDOffset >= 0x00000008) {\n                ifdStart = tiffOffset + firstIFDOffset;\n              }\n            }\n          }\n      }\n    }\n\n    if (ifdStart) {\n      var _length = dataView.getUint16(ifdStart, littleEndian);\n\n      var _offset;\n\n      var i;\n\n      for (i = 0; i < _length; i += 1) {\n        _offset = ifdStart + i * 12 + 2;\n\n        if (dataView.getUint16(_offset, littleEndian) === 0x0112\n        /* Orientation */\n        ) {\n            // 8 is the offset of the current tag's value\n            _offset += 8; // Get the original orientation value\n\n            orientation = dataView.getUint16(_offset, littleEndian); // Override the orientation with its default value\n\n            dataView.setUint16(_offset, 1, littleEndian);\n            break;\n          }\n      }\n    }\n  } catch (error) {\n    orientation = 1;\n  }\n\n  return orientation;\n}\n/**\n * Parse Exif Orientation value.\n * @param {number} orientation - The orientation to parse.\n * @returns {Object} The parsed result.\n */\n\nfunction parseOrientation(orientation) {\n  var rotate = 0;\n  var scaleX = 1;\n  var scaleY = 1;\n\n  switch (orientation) {\n    // Flip horizontal\n    case 2:\n      scaleX = -1;\n      break;\n    // Rotate left 180°\n\n    case 3:\n      rotate = -180;\n      break;\n    // Flip vertical\n\n    case 4:\n      scaleY = -1;\n      break;\n    // Flip vertical and rotate right 90°\n\n    case 5:\n      rotate = 90;\n      scaleY = -1;\n      break;\n    // Rotate right 90°\n\n    case 6:\n      rotate = 90;\n      break;\n    // Flip horizontal and rotate right 90°\n\n    case 7:\n      rotate = 90;\n      scaleX = -1;\n      break;\n    // Rotate left 90°\n\n    case 8:\n      rotate = -90;\n      break;\n  }\n\n  return {\n    rotate: rotate,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n\nvar render = {\n  render: function render() {\n    this.initContainer();\n    this.initCanvas();\n    this.initCropBox();\n    this.renderCanvas();\n\n    if (this.cropped) {\n      this.renderCropBox();\n    }\n  },\n  initContainer: function initContainer() {\n    var element = this.element,\n        options = this.options,\n        container = this.container,\n        cropper = this.cropper;\n    var minWidth = Number(options.minContainerWidth);\n    var minHeight = Number(options.minContainerHeight);\n    addClass(cropper, CLASS_HIDDEN);\n    removeClass(element, CLASS_HIDDEN);\n    var containerData = {\n      width: Math.max(container.offsetWidth, minWidth >= 0 ? minWidth : MIN_CONTAINER_WIDTH),\n      height: Math.max(container.offsetHeight, minHeight >= 0 ? minHeight : MIN_CONTAINER_HEIGHT)\n    };\n    this.containerData = containerData;\n    setStyle(cropper, {\n      width: containerData.width,\n      height: containerData.height\n    });\n    addClass(element, CLASS_HIDDEN);\n    removeClass(cropper, CLASS_HIDDEN);\n  },\n  // Canvas (image wrapper)\n  initCanvas: function initCanvas() {\n    var containerData = this.containerData,\n        imageData = this.imageData;\n    var viewMode = this.options.viewMode;\n    var rotated = Math.abs(imageData.rotate) % 180 === 90;\n    var naturalWidth = rotated ? imageData.naturalHeight : imageData.naturalWidth;\n    var naturalHeight = rotated ? imageData.naturalWidth : imageData.naturalHeight;\n    var aspectRatio = naturalWidth / naturalHeight;\n    var canvasWidth = containerData.width;\n    var canvasHeight = containerData.height;\n\n    if (containerData.height * aspectRatio > containerData.width) {\n      if (viewMode === 3) {\n        canvasWidth = containerData.height * aspectRatio;\n      } else {\n        canvasHeight = containerData.width / aspectRatio;\n      }\n    } else if (viewMode === 3) {\n      canvasHeight = containerData.width / aspectRatio;\n    } else {\n      canvasWidth = containerData.height * aspectRatio;\n    }\n\n    var canvasData = {\n      aspectRatio: aspectRatio,\n      naturalWidth: naturalWidth,\n      naturalHeight: naturalHeight,\n      width: canvasWidth,\n      height: canvasHeight\n    };\n    this.canvasData = canvasData;\n    this.limited = viewMode === 1 || viewMode === 2;\n    this.limitCanvas(true, true);\n    canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);\n    canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);\n    canvasData.left = (containerData.width - canvasData.width) / 2;\n    canvasData.top = (containerData.height - canvasData.height) / 2;\n    canvasData.oldLeft = canvasData.left;\n    canvasData.oldTop = canvasData.top;\n    this.initialCanvasData = assign({}, canvasData);\n  },\n  limitCanvas: function limitCanvas(sizeLimited, positionLimited) {\n    var options = this.options,\n        containerData = this.containerData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData;\n    var viewMode = options.viewMode;\n    var aspectRatio = canvasData.aspectRatio;\n    var cropped = this.cropped && cropBoxData;\n\n    if (sizeLimited) {\n      var minCanvasWidth = Number(options.minCanvasWidth) || 0;\n      var minCanvasHeight = Number(options.minCanvasHeight) || 0;\n\n      if (viewMode > 1) {\n        minCanvasWidth = Math.max(minCanvasWidth, containerData.width);\n        minCanvasHeight = Math.max(minCanvasHeight, containerData.height);\n\n        if (viewMode === 3) {\n          if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n            minCanvasWidth = minCanvasHeight * aspectRatio;\n          } else {\n            minCanvasHeight = minCanvasWidth / aspectRatio;\n          }\n        }\n      } else if (viewMode > 0) {\n        if (minCanvasWidth) {\n          minCanvasWidth = Math.max(minCanvasWidth, cropped ? cropBoxData.width : 0);\n        } else if (minCanvasHeight) {\n          minCanvasHeight = Math.max(minCanvasHeight, cropped ? cropBoxData.height : 0);\n        } else if (cropped) {\n          minCanvasWidth = cropBoxData.width;\n          minCanvasHeight = cropBoxData.height;\n\n          if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n            minCanvasWidth = minCanvasHeight * aspectRatio;\n          } else {\n            minCanvasHeight = minCanvasWidth / aspectRatio;\n          }\n        }\n      }\n\n      var _getAdjustedSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: minCanvasWidth,\n        height: minCanvasHeight\n      });\n\n      minCanvasWidth = _getAdjustedSizes.width;\n      minCanvasHeight = _getAdjustedSizes.height;\n      canvasData.minWidth = minCanvasWidth;\n      canvasData.minHeight = minCanvasHeight;\n      canvasData.maxWidth = Infinity;\n      canvasData.maxHeight = Infinity;\n    }\n\n    if (positionLimited) {\n      if (viewMode > (cropped ? 0 : 1)) {\n        var newCanvasLeft = containerData.width - canvasData.width;\n        var newCanvasTop = containerData.height - canvasData.height;\n        canvasData.minLeft = Math.min(0, newCanvasLeft);\n        canvasData.minTop = Math.min(0, newCanvasTop);\n        canvasData.maxLeft = Math.max(0, newCanvasLeft);\n        canvasData.maxTop = Math.max(0, newCanvasTop);\n\n        if (cropped && this.limited) {\n          canvasData.minLeft = Math.min(cropBoxData.left, cropBoxData.left + (cropBoxData.width - canvasData.width));\n          canvasData.minTop = Math.min(cropBoxData.top, cropBoxData.top + (cropBoxData.height - canvasData.height));\n          canvasData.maxLeft = cropBoxData.left;\n          canvasData.maxTop = cropBoxData.top;\n\n          if (viewMode === 2) {\n            if (canvasData.width >= containerData.width) {\n              canvasData.minLeft = Math.min(0, newCanvasLeft);\n              canvasData.maxLeft = Math.max(0, newCanvasLeft);\n            }\n\n            if (canvasData.height >= containerData.height) {\n              canvasData.minTop = Math.min(0, newCanvasTop);\n              canvasData.maxTop = Math.max(0, newCanvasTop);\n            }\n          }\n        }\n      } else {\n        canvasData.minLeft = -canvasData.width;\n        canvasData.minTop = -canvasData.height;\n        canvasData.maxLeft = containerData.width;\n        canvasData.maxTop = containerData.height;\n      }\n    }\n  },\n  renderCanvas: function renderCanvas(changed, transformed) {\n    var canvasData = this.canvasData,\n        imageData = this.imageData;\n\n    if (transformed) {\n      var _getRotatedSizes = getRotatedSizes({\n        width: imageData.naturalWidth * Math.abs(imageData.scaleX || 1),\n        height: imageData.naturalHeight * Math.abs(imageData.scaleY || 1),\n        degree: imageData.rotate || 0\n      }),\n          naturalWidth = _getRotatedSizes.width,\n          naturalHeight = _getRotatedSizes.height;\n\n      var width = canvasData.width * (naturalWidth / canvasData.naturalWidth);\n      var height = canvasData.height * (naturalHeight / canvasData.naturalHeight);\n      canvasData.left -= (width - canvasData.width) / 2;\n      canvasData.top -= (height - canvasData.height) / 2;\n      canvasData.width = width;\n      canvasData.height = height;\n      canvasData.aspectRatio = naturalWidth / naturalHeight;\n      canvasData.naturalWidth = naturalWidth;\n      canvasData.naturalHeight = naturalHeight;\n      this.limitCanvas(true, false);\n    }\n\n    if (canvasData.width > canvasData.maxWidth || canvasData.width < canvasData.minWidth) {\n      canvasData.left = canvasData.oldLeft;\n    }\n\n    if (canvasData.height > canvasData.maxHeight || canvasData.height < canvasData.minHeight) {\n      canvasData.top = canvasData.oldTop;\n    }\n\n    canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);\n    canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);\n    this.limitCanvas(false, true);\n    canvasData.left = Math.min(Math.max(canvasData.left, canvasData.minLeft), canvasData.maxLeft);\n    canvasData.top = Math.min(Math.max(canvasData.top, canvasData.minTop), canvasData.maxTop);\n    canvasData.oldLeft = canvasData.left;\n    canvasData.oldTop = canvasData.top;\n    setStyle(this.canvas, assign({\n      width: canvasData.width,\n      height: canvasData.height\n    }, getTransforms({\n      translateX: canvasData.left,\n      translateY: canvasData.top\n    })));\n    this.renderImage(changed);\n\n    if (this.cropped && this.limited) {\n      this.limitCropBox(true, true);\n    }\n  },\n  renderImage: function renderImage(changed) {\n    var canvasData = this.canvasData,\n        imageData = this.imageData;\n    var width = imageData.naturalWidth * (canvasData.width / canvasData.naturalWidth);\n    var height = imageData.naturalHeight * (canvasData.height / canvasData.naturalHeight);\n    assign(imageData, {\n      width: width,\n      height: height,\n      left: (canvasData.width - width) / 2,\n      top: (canvasData.height - height) / 2\n    });\n    setStyle(this.image, assign({\n      width: imageData.width,\n      height: imageData.height\n    }, getTransforms(assign({\n      translateX: imageData.left,\n      translateY: imageData.top\n    }, imageData))));\n\n    if (changed) {\n      this.output();\n    }\n  },\n  initCropBox: function initCropBox() {\n    var options = this.options,\n        canvasData = this.canvasData;\n    var aspectRatio = options.aspectRatio || options.initialAspectRatio;\n    var autoCropArea = Number(options.autoCropArea) || 0.8;\n    var cropBoxData = {\n      width: canvasData.width,\n      height: canvasData.height\n    };\n\n    if (aspectRatio) {\n      if (canvasData.height * aspectRatio > canvasData.width) {\n        cropBoxData.height = cropBoxData.width / aspectRatio;\n      } else {\n        cropBoxData.width = cropBoxData.height * aspectRatio;\n      }\n    }\n\n    this.cropBoxData = cropBoxData;\n    this.limitCropBox(true, true); // Initialize auto crop area\n\n    cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n    cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight); // The width/height of auto crop area must large than \"minWidth/Height\"\n\n    cropBoxData.width = Math.max(cropBoxData.minWidth, cropBoxData.width * autoCropArea);\n    cropBoxData.height = Math.max(cropBoxData.minHeight, cropBoxData.height * autoCropArea);\n    cropBoxData.left = canvasData.left + (canvasData.width - cropBoxData.width) / 2;\n    cropBoxData.top = canvasData.top + (canvasData.height - cropBoxData.height) / 2;\n    cropBoxData.oldLeft = cropBoxData.left;\n    cropBoxData.oldTop = cropBoxData.top;\n    this.initialCropBoxData = assign({}, cropBoxData);\n  },\n  limitCropBox: function limitCropBox(sizeLimited, positionLimited) {\n    var options = this.options,\n        containerData = this.containerData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData,\n        limited = this.limited;\n    var aspectRatio = options.aspectRatio;\n\n    if (sizeLimited) {\n      var minCropBoxWidth = Number(options.minCropBoxWidth) || 0;\n      var minCropBoxHeight = Number(options.minCropBoxHeight) || 0;\n      var maxCropBoxWidth = limited ? Math.min(containerData.width, canvasData.width, canvasData.width + canvasData.left, containerData.width - canvasData.left) : containerData.width;\n      var maxCropBoxHeight = limited ? Math.min(containerData.height, canvasData.height, canvasData.height + canvasData.top, containerData.height - canvasData.top) : containerData.height; // The min/maxCropBoxWidth/Height must be less than container's width/height\n\n      minCropBoxWidth = Math.min(minCropBoxWidth, containerData.width);\n      minCropBoxHeight = Math.min(minCropBoxHeight, containerData.height);\n\n      if (aspectRatio) {\n        if (minCropBoxWidth && minCropBoxHeight) {\n          if (minCropBoxHeight * aspectRatio > minCropBoxWidth) {\n            minCropBoxHeight = minCropBoxWidth / aspectRatio;\n          } else {\n            minCropBoxWidth = minCropBoxHeight * aspectRatio;\n          }\n        } else if (minCropBoxWidth) {\n          minCropBoxHeight = minCropBoxWidth / aspectRatio;\n        } else if (minCropBoxHeight) {\n          minCropBoxWidth = minCropBoxHeight * aspectRatio;\n        }\n\n        if (maxCropBoxHeight * aspectRatio > maxCropBoxWidth) {\n          maxCropBoxHeight = maxCropBoxWidth / aspectRatio;\n        } else {\n          maxCropBoxWidth = maxCropBoxHeight * aspectRatio;\n        }\n      } // The minWidth/Height must be less than maxWidth/Height\n\n\n      cropBoxData.minWidth = Math.min(minCropBoxWidth, maxCropBoxWidth);\n      cropBoxData.minHeight = Math.min(minCropBoxHeight, maxCropBoxHeight);\n      cropBoxData.maxWidth = maxCropBoxWidth;\n      cropBoxData.maxHeight = maxCropBoxHeight;\n    }\n\n    if (positionLimited) {\n      if (limited) {\n        cropBoxData.minLeft = Math.max(0, canvasData.left);\n        cropBoxData.minTop = Math.max(0, canvasData.top);\n        cropBoxData.maxLeft = Math.min(containerData.width, canvasData.left + canvasData.width) - cropBoxData.width;\n        cropBoxData.maxTop = Math.min(containerData.height, canvasData.top + canvasData.height) - cropBoxData.height;\n      } else {\n        cropBoxData.minLeft = 0;\n        cropBoxData.minTop = 0;\n        cropBoxData.maxLeft = containerData.width - cropBoxData.width;\n        cropBoxData.maxTop = containerData.height - cropBoxData.height;\n      }\n    }\n  },\n  renderCropBox: function renderCropBox() {\n    var options = this.options,\n        containerData = this.containerData,\n        cropBoxData = this.cropBoxData;\n\n    if (cropBoxData.width > cropBoxData.maxWidth || cropBoxData.width < cropBoxData.minWidth) {\n      cropBoxData.left = cropBoxData.oldLeft;\n    }\n\n    if (cropBoxData.height > cropBoxData.maxHeight || cropBoxData.height < cropBoxData.minHeight) {\n      cropBoxData.top = cropBoxData.oldTop;\n    }\n\n    cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n    cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight);\n    this.limitCropBox(false, true);\n    cropBoxData.left = Math.min(Math.max(cropBoxData.left, cropBoxData.minLeft), cropBoxData.maxLeft);\n    cropBoxData.top = Math.min(Math.max(cropBoxData.top, cropBoxData.minTop), cropBoxData.maxTop);\n    cropBoxData.oldLeft = cropBoxData.left;\n    cropBoxData.oldTop = cropBoxData.top;\n\n    if (options.movable && options.cropBoxMovable) {\n      // Turn to move the canvas when the crop box is equal to the container\n      setData(this.face, DATA_ACTION, cropBoxData.width >= containerData.width && cropBoxData.height >= containerData.height ? ACTION_MOVE : ACTION_ALL);\n    }\n\n    setStyle(this.cropBox, assign({\n      width: cropBoxData.width,\n      height: cropBoxData.height\n    }, getTransforms({\n      translateX: cropBoxData.left,\n      translateY: cropBoxData.top\n    })));\n\n    if (this.cropped && this.limited) {\n      this.limitCanvas(true, true);\n    }\n\n    if (!this.disabled) {\n      this.output();\n    }\n  },\n  output: function output() {\n    this.preview();\n    dispatchEvent(this.element, EVENT_CROP, this.getData());\n  }\n};\n\nvar preview = {\n  initPreview: function initPreview() {\n    var element = this.element,\n        crossOrigin = this.crossOrigin;\n    var preview = this.options.preview;\n    var url = crossOrigin ? this.crossOriginUrl : this.url;\n    var alt = element.alt || 'The image to preview';\n    var image = document.createElement('img');\n\n    if (crossOrigin) {\n      image.crossOrigin = crossOrigin;\n    }\n\n    image.src = url;\n    image.alt = alt;\n    this.viewBox.appendChild(image);\n    this.viewBoxImage = image;\n\n    if (!preview) {\n      return;\n    }\n\n    var previews = preview;\n\n    if (typeof preview === 'string') {\n      previews = element.ownerDocument.querySelectorAll(preview);\n    } else if (preview.querySelector) {\n      previews = [preview];\n    }\n\n    this.previews = previews;\n    forEach(previews, function (el) {\n      var img = document.createElement('img'); // Save the original size for recover\n\n      setData(el, DATA_PREVIEW, {\n        width: el.offsetWidth,\n        height: el.offsetHeight,\n        html: el.innerHTML\n      });\n\n      if (crossOrigin) {\n        img.crossOrigin = crossOrigin;\n      }\n\n      img.src = url;\n      img.alt = alt;\n      /**\n       * Override img element styles\n       * Add `display:block` to avoid margin top issue\n       * Add `height:auto` to override `height` attribute on IE8\n       * (Occur only when margin-top <= -height)\n       */\n\n      img.style.cssText = 'display:block;' + 'width:100%;' + 'height:auto;' + 'min-width:0!important;' + 'min-height:0!important;' + 'max-width:none!important;' + 'max-height:none!important;' + 'image-orientation:0deg!important;\"';\n      el.innerHTML = '';\n      el.appendChild(img);\n    });\n  },\n  resetPreview: function resetPreview() {\n    forEach(this.previews, function (element) {\n      var data = getData(element, DATA_PREVIEW);\n      setStyle(element, {\n        width: data.width,\n        height: data.height\n      });\n      element.innerHTML = data.html;\n      removeData(element, DATA_PREVIEW);\n    });\n  },\n  preview: function preview() {\n    var imageData = this.imageData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData;\n    var cropBoxWidth = cropBoxData.width,\n        cropBoxHeight = cropBoxData.height;\n    var width = imageData.width,\n        height = imageData.height;\n    var left = cropBoxData.left - canvasData.left - imageData.left;\n    var top = cropBoxData.top - canvasData.top - imageData.top;\n\n    if (!this.cropped || this.disabled) {\n      return;\n    }\n\n    setStyle(this.viewBoxImage, assign({\n      width: width,\n      height: height\n    }, getTransforms(assign({\n      translateX: -left,\n      translateY: -top\n    }, imageData))));\n    forEach(this.previews, function (element) {\n      var data = getData(element, DATA_PREVIEW);\n      var originalWidth = data.width;\n      var originalHeight = data.height;\n      var newWidth = originalWidth;\n      var newHeight = originalHeight;\n      var ratio = 1;\n\n      if (cropBoxWidth) {\n        ratio = originalWidth / cropBoxWidth;\n        newHeight = cropBoxHeight * ratio;\n      }\n\n      if (cropBoxHeight && newHeight > originalHeight) {\n        ratio = originalHeight / cropBoxHeight;\n        newWidth = cropBoxWidth * ratio;\n        newHeight = originalHeight;\n      }\n\n      setStyle(element, {\n        width: newWidth,\n        height: newHeight\n      });\n      setStyle(element.getElementsByTagName('img')[0], assign({\n        width: width * ratio,\n        height: height * ratio\n      }, getTransforms(assign({\n        translateX: -left * ratio,\n        translateY: -top * ratio\n      }, imageData))));\n    });\n  }\n};\n\nvar events = {\n  bind: function bind() {\n    var element = this.element,\n        options = this.options,\n        cropper = this.cropper;\n\n    if (isFunction(options.cropstart)) {\n      addListener(element, EVENT_CROP_START, options.cropstart);\n    }\n\n    if (isFunction(options.cropmove)) {\n      addListener(element, EVENT_CROP_MOVE, options.cropmove);\n    }\n\n    if (isFunction(options.cropend)) {\n      addListener(element, EVENT_CROP_END, options.cropend);\n    }\n\n    if (isFunction(options.crop)) {\n      addListener(element, EVENT_CROP, options.crop);\n    }\n\n    if (isFunction(options.zoom)) {\n      addListener(element, EVENT_ZOOM, options.zoom);\n    }\n\n    addListener(cropper, EVENT_POINTER_DOWN, this.onCropStart = this.cropStart.bind(this));\n\n    if (options.zoomable && options.zoomOnWheel) {\n      addListener(cropper, EVENT_WHEEL, this.onWheel = this.wheel.bind(this), {\n        passive: false,\n        capture: true\n      });\n    }\n\n    if (options.toggleDragModeOnDblclick) {\n      addListener(cropper, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));\n    }\n\n    addListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove = this.cropMove.bind(this));\n    addListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd = this.cropEnd.bind(this));\n\n    if (options.responsive) {\n      addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));\n    }\n  },\n  unbind: function unbind() {\n    var element = this.element,\n        options = this.options,\n        cropper = this.cropper;\n\n    if (isFunction(options.cropstart)) {\n      removeListener(element, EVENT_CROP_START, options.cropstart);\n    }\n\n    if (isFunction(options.cropmove)) {\n      removeListener(element, EVENT_CROP_MOVE, options.cropmove);\n    }\n\n    if (isFunction(options.cropend)) {\n      removeListener(element, EVENT_CROP_END, options.cropend);\n    }\n\n    if (isFunction(options.crop)) {\n      removeListener(element, EVENT_CROP, options.crop);\n    }\n\n    if (isFunction(options.zoom)) {\n      removeListener(element, EVENT_ZOOM, options.zoom);\n    }\n\n    removeListener(cropper, EVENT_POINTER_DOWN, this.onCropStart);\n\n    if (options.zoomable && options.zoomOnWheel) {\n      removeListener(cropper, EVENT_WHEEL, this.onWheel, {\n        passive: false,\n        capture: true\n      });\n    }\n\n    if (options.toggleDragModeOnDblclick) {\n      removeListener(cropper, EVENT_DBLCLICK, this.onDblclick);\n    }\n\n    removeListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove);\n    removeListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd);\n\n    if (options.responsive) {\n      removeListener(window, EVENT_RESIZE, this.onResize);\n    }\n  }\n};\n\nvar handlers = {\n  resize: function resize() {\n    if (this.disabled) {\n      return;\n    }\n\n    var options = this.options,\n        container = this.container,\n        containerData = this.containerData;\n    var ratioX = container.offsetWidth / containerData.width;\n    var ratioY = container.offsetHeight / containerData.height;\n    var ratio = Math.abs(ratioX - 1) > Math.abs(ratioY - 1) ? ratioX : ratioY; // Resize when width changed or height changed\n\n    if (ratio !== 1) {\n      var canvasData;\n      var cropBoxData;\n\n      if (options.restore) {\n        canvasData = this.getCanvasData();\n        cropBoxData = this.getCropBoxData();\n      }\n\n      this.render();\n\n      if (options.restore) {\n        this.setCanvasData(forEach(canvasData, function (n, i) {\n          canvasData[i] = n * ratio;\n        }));\n        this.setCropBoxData(forEach(cropBoxData, function (n, i) {\n          cropBoxData[i] = n * ratio;\n        }));\n      }\n    }\n  },\n  dblclick: function dblclick() {\n    if (this.disabled || this.options.dragMode === DRAG_MODE_NONE) {\n      return;\n    }\n\n    this.setDragMode(hasClass(this.dragBox, CLASS_CROP) ? DRAG_MODE_MOVE : DRAG_MODE_CROP);\n  },\n  wheel: function wheel(event) {\n    var _this = this;\n\n    var ratio = Number(this.options.wheelZoomRatio) || 0.1;\n    var delta = 1;\n\n    if (this.disabled) {\n      return;\n    }\n\n    event.preventDefault(); // Limit wheel speed to prevent zoom too fast (#21)\n\n    if (this.wheeling) {\n      return;\n    }\n\n    this.wheeling = true;\n    setTimeout(function () {\n      _this.wheeling = false;\n    }, 50);\n\n    if (event.deltaY) {\n      delta = event.deltaY > 0 ? 1 : -1;\n    } else if (event.wheelDelta) {\n      delta = -event.wheelDelta / 120;\n    } else if (event.detail) {\n      delta = event.detail > 0 ? 1 : -1;\n    }\n\n    this.zoom(-delta * ratio, event);\n  },\n  cropStart: function cropStart(event) {\n    var buttons = event.buttons,\n        button = event.button;\n\n    if (this.disabled // Handle mouse event and pointer event and ignore touch event\n    || (event.type === 'mousedown' || event.type === 'pointerdown' && event.pointerType === 'mouse') && ( // No primary button (Usually the left button)\n    isNumber(buttons) && buttons !== 1 || isNumber(button) && button !== 0 // Open context menu\n    || event.ctrlKey)) {\n      return;\n    }\n\n    var options = this.options,\n        pointers = this.pointers;\n    var action;\n\n    if (event.changedTouches) {\n      // Handle touch event\n      forEach(event.changedTouches, function (touch) {\n        pointers[touch.identifier] = getPointer(touch);\n      });\n    } else {\n      // Handle mouse event and pointer event\n      pointers[event.pointerId || 0] = getPointer(event);\n    }\n\n    if (Object.keys(pointers).length > 1 && options.zoomable && options.zoomOnTouch) {\n      action = ACTION_ZOOM;\n    } else {\n      action = getData(event.target, DATA_ACTION);\n    }\n\n    if (!REGEXP_ACTIONS.test(action)) {\n      return;\n    }\n\n    if (dispatchEvent(this.element, EVENT_CROP_START, {\n      originalEvent: event,\n      action: action\n    }) === false) {\n      return;\n    } // This line is required for preventing page zooming in iOS browsers\n\n\n    event.preventDefault();\n    this.action = action;\n    this.cropping = false;\n\n    if (action === ACTION_CROP) {\n      this.cropping = true;\n      addClass(this.dragBox, CLASS_MODAL);\n    }\n  },\n  cropMove: function cropMove(event) {\n    var action = this.action;\n\n    if (this.disabled || !action) {\n      return;\n    }\n\n    var pointers = this.pointers;\n    event.preventDefault();\n\n    if (dispatchEvent(this.element, EVENT_CROP_MOVE, {\n      originalEvent: event,\n      action: action\n    }) === false) {\n      return;\n    }\n\n    if (event.changedTouches) {\n      forEach(event.changedTouches, function (touch) {\n        // The first parameter should not be undefined (#432)\n        assign(pointers[touch.identifier] || {}, getPointer(touch, true));\n      });\n    } else {\n      assign(pointers[event.pointerId || 0] || {}, getPointer(event, true));\n    }\n\n    this.change(event);\n  },\n  cropEnd: function cropEnd(event) {\n    if (this.disabled) {\n      return;\n    }\n\n    var action = this.action,\n        pointers = this.pointers;\n\n    if (event.changedTouches) {\n      forEach(event.changedTouches, function (touch) {\n        delete pointers[touch.identifier];\n      });\n    } else {\n      delete pointers[event.pointerId || 0];\n    }\n\n    if (!action) {\n      return;\n    }\n\n    event.preventDefault();\n\n    if (!Object.keys(pointers).length) {\n      this.action = '';\n    }\n\n    if (this.cropping) {\n      this.cropping = false;\n      toggleClass(this.dragBox, CLASS_MODAL, this.cropped && this.options.modal);\n    }\n\n    dispatchEvent(this.element, EVENT_CROP_END, {\n      originalEvent: event,\n      action: action\n    });\n  }\n};\n\nvar change = {\n  change: function change(event) {\n    var options = this.options,\n        canvasData = this.canvasData,\n        containerData = this.containerData,\n        cropBoxData = this.cropBoxData,\n        pointers = this.pointers;\n    var action = this.action;\n    var aspectRatio = options.aspectRatio;\n    var left = cropBoxData.left,\n        top = cropBoxData.top,\n        width = cropBoxData.width,\n        height = cropBoxData.height;\n    var right = left + width;\n    var bottom = top + height;\n    var minLeft = 0;\n    var minTop = 0;\n    var maxWidth = containerData.width;\n    var maxHeight = containerData.height;\n    var renderable = true;\n    var offset; // Locking aspect ratio in \"free mode\" by holding shift key\n\n    if (!aspectRatio && event.shiftKey) {\n      aspectRatio = width && height ? width / height : 1;\n    }\n\n    if (this.limited) {\n      minLeft = cropBoxData.minLeft;\n      minTop = cropBoxData.minTop;\n      maxWidth = minLeft + Math.min(containerData.width, canvasData.width, canvasData.left + canvasData.width);\n      maxHeight = minTop + Math.min(containerData.height, canvasData.height, canvasData.top + canvasData.height);\n    }\n\n    var pointer = pointers[Object.keys(pointers)[0]];\n    var range = {\n      x: pointer.endX - pointer.startX,\n      y: pointer.endY - pointer.startY\n    };\n\n    var check = function check(side) {\n      switch (side) {\n        case ACTION_EAST:\n          if (right + range.x > maxWidth) {\n            range.x = maxWidth - right;\n          }\n\n          break;\n\n        case ACTION_WEST:\n          if (left + range.x < minLeft) {\n            range.x = minLeft - left;\n          }\n\n          break;\n\n        case ACTION_NORTH:\n          if (top + range.y < minTop) {\n            range.y = minTop - top;\n          }\n\n          break;\n\n        case ACTION_SOUTH:\n          if (bottom + range.y > maxHeight) {\n            range.y = maxHeight - bottom;\n          }\n\n          break;\n      }\n    };\n\n    switch (action) {\n      // Move crop box\n      case ACTION_ALL:\n        left += range.x;\n        top += range.y;\n        break;\n      // Resize crop box\n\n      case ACTION_EAST:\n        if (range.x >= 0 && (right >= maxWidth || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n          renderable = false;\n          break;\n        }\n\n        check(ACTION_EAST);\n        width += range.x;\n\n        if (width < 0) {\n          action = ACTION_WEST;\n          width = -width;\n          left -= width;\n        }\n\n        if (aspectRatio) {\n          height = width / aspectRatio;\n          top += (cropBoxData.height - height) / 2;\n        }\n\n        break;\n\n      case ACTION_NORTH:\n        if (range.y <= 0 && (top <= minTop || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n          renderable = false;\n          break;\n        }\n\n        check(ACTION_NORTH);\n        height -= range.y;\n        top += range.y;\n\n        if (height < 0) {\n          action = ACTION_SOUTH;\n          height = -height;\n          top -= height;\n        }\n\n        if (aspectRatio) {\n          width = height * aspectRatio;\n          left += (cropBoxData.width - width) / 2;\n        }\n\n        break;\n\n      case ACTION_WEST:\n        if (range.x <= 0 && (left <= minLeft || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n          renderable = false;\n          break;\n        }\n\n        check(ACTION_WEST);\n        width -= range.x;\n        left += range.x;\n\n        if (width < 0) {\n          action = ACTION_EAST;\n          width = -width;\n          left -= width;\n        }\n\n        if (aspectRatio) {\n          height = width / aspectRatio;\n          top += (cropBoxData.height - height) / 2;\n        }\n\n        break;\n\n      case ACTION_SOUTH:\n        if (range.y >= 0 && (bottom >= maxHeight || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n          renderable = false;\n          break;\n        }\n\n        check(ACTION_SOUTH);\n        height += range.y;\n\n        if (height < 0) {\n          action = ACTION_NORTH;\n          height = -height;\n          top -= height;\n        }\n\n        if (aspectRatio) {\n          width = height * aspectRatio;\n          left += (cropBoxData.width - width) / 2;\n        }\n\n        break;\n\n      case ACTION_NORTH_EAST:\n        if (aspectRatio) {\n          if (range.y <= 0 && (top <= minTop || right >= maxWidth)) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_NORTH);\n          height -= range.y;\n          top += range.y;\n          width = height * aspectRatio;\n        } else {\n          check(ACTION_NORTH);\n          check(ACTION_EAST);\n\n          if (range.x >= 0) {\n            if (right < maxWidth) {\n              width += range.x;\n            } else if (range.y <= 0 && top <= minTop) {\n              renderable = false;\n            }\n          } else {\n            width += range.x;\n          }\n\n          if (range.y <= 0) {\n            if (top > minTop) {\n              height -= range.y;\n              top += range.y;\n            }\n          } else {\n            height -= range.y;\n            top += range.y;\n          }\n        }\n\n        if (width < 0 && height < 0) {\n          action = ACTION_SOUTH_WEST;\n          height = -height;\n          width = -width;\n          top -= height;\n          left -= width;\n        } else if (width < 0) {\n          action = ACTION_NORTH_WEST;\n          width = -width;\n          left -= width;\n        } else if (height < 0) {\n          action = ACTION_SOUTH_EAST;\n          height = -height;\n          top -= height;\n        }\n\n        break;\n\n      case ACTION_NORTH_WEST:\n        if (aspectRatio) {\n          if (range.y <= 0 && (top <= minTop || left <= minLeft)) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_NORTH);\n          height -= range.y;\n          top += range.y;\n          width = height * aspectRatio;\n          left += cropBoxData.width - width;\n        } else {\n          check(ACTION_NORTH);\n          check(ACTION_WEST);\n\n          if (range.x <= 0) {\n            if (left > minLeft) {\n              width -= range.x;\n              left += range.x;\n            } else if (range.y <= 0 && top <= minTop) {\n              renderable = false;\n            }\n          } else {\n            width -= range.x;\n            left += range.x;\n          }\n\n          if (range.y <= 0) {\n            if (top > minTop) {\n              height -= range.y;\n              top += range.y;\n            }\n          } else {\n            height -= range.y;\n            top += range.y;\n          }\n        }\n\n        if (width < 0 && height < 0) {\n          action = ACTION_SOUTH_EAST;\n          height = -height;\n          width = -width;\n          top -= height;\n          left -= width;\n        } else if (width < 0) {\n          action = ACTION_NORTH_EAST;\n          width = -width;\n          left -= width;\n        } else if (height < 0) {\n          action = ACTION_SOUTH_WEST;\n          height = -height;\n          top -= height;\n        }\n\n        break;\n\n      case ACTION_SOUTH_WEST:\n        if (aspectRatio) {\n          if (range.x <= 0 && (left <= minLeft || bottom >= maxHeight)) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_WEST);\n          width -= range.x;\n          left += range.x;\n          height = width / aspectRatio;\n        } else {\n          check(ACTION_SOUTH);\n          check(ACTION_WEST);\n\n          if (range.x <= 0) {\n            if (left > minLeft) {\n              width -= range.x;\n              left += range.x;\n            } else if (range.y >= 0 && bottom >= maxHeight) {\n              renderable = false;\n            }\n          } else {\n            width -= range.x;\n            left += range.x;\n          }\n\n          if (range.y >= 0) {\n            if (bottom < maxHeight) {\n              height += range.y;\n            }\n          } else {\n            height += range.y;\n          }\n        }\n\n        if (width < 0 && height < 0) {\n          action = ACTION_NORTH_EAST;\n          height = -height;\n          width = -width;\n          top -= height;\n          left -= width;\n        } else if (width < 0) {\n          action = ACTION_SOUTH_EAST;\n          width = -width;\n          left -= width;\n        } else if (height < 0) {\n          action = ACTION_NORTH_WEST;\n          height = -height;\n          top -= height;\n        }\n\n        break;\n\n      case ACTION_SOUTH_EAST:\n        if (aspectRatio) {\n          if (range.x >= 0 && (right >= maxWidth || bottom >= maxHeight)) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_EAST);\n          width += range.x;\n          height = width / aspectRatio;\n        } else {\n          check(ACTION_SOUTH);\n          check(ACTION_EAST);\n\n          if (range.x >= 0) {\n            if (right < maxWidth) {\n              width += range.x;\n            } else if (range.y >= 0 && bottom >= maxHeight) {\n              renderable = false;\n            }\n          } else {\n            width += range.x;\n          }\n\n          if (range.y >= 0) {\n            if (bottom < maxHeight) {\n              height += range.y;\n            }\n          } else {\n            height += range.y;\n          }\n        }\n\n        if (width < 0 && height < 0) {\n          action = ACTION_NORTH_WEST;\n          height = -height;\n          width = -width;\n          top -= height;\n          left -= width;\n        } else if (width < 0) {\n          action = ACTION_SOUTH_WEST;\n          width = -width;\n          left -= width;\n        } else if (height < 0) {\n          action = ACTION_NORTH_EAST;\n          height = -height;\n          top -= height;\n        }\n\n        break;\n      // Move canvas\n\n      case ACTION_MOVE:\n        this.move(range.x, range.y);\n        renderable = false;\n        break;\n      // Zoom canvas\n\n      case ACTION_ZOOM:\n        this.zoom(getMaxZoomRatio(pointers), event);\n        renderable = false;\n        break;\n      // Create crop box\n\n      case ACTION_CROP:\n        if (!range.x || !range.y) {\n          renderable = false;\n          break;\n        }\n\n        offset = getOffset(this.cropper);\n        left = pointer.startX - offset.left;\n        top = pointer.startY - offset.top;\n        width = cropBoxData.minWidth;\n        height = cropBoxData.minHeight;\n\n        if (range.x > 0) {\n          action = range.y > 0 ? ACTION_SOUTH_EAST : ACTION_NORTH_EAST;\n        } else if (range.x < 0) {\n          left -= width;\n          action = range.y > 0 ? ACTION_SOUTH_WEST : ACTION_NORTH_WEST;\n        }\n\n        if (range.y < 0) {\n          top -= height;\n        } // Show the crop box if is hidden\n\n\n        if (!this.cropped) {\n          removeClass(this.cropBox, CLASS_HIDDEN);\n          this.cropped = true;\n\n          if (this.limited) {\n            this.limitCropBox(true, true);\n          }\n        }\n\n        break;\n    }\n\n    if (renderable) {\n      cropBoxData.width = width;\n      cropBoxData.height = height;\n      cropBoxData.left = left;\n      cropBoxData.top = top;\n      this.action = action;\n      this.renderCropBox();\n    } // Override\n\n\n    forEach(pointers, function (p) {\n      p.startX = p.endX;\n      p.startY = p.endY;\n    });\n  }\n};\n\nvar methods = {\n  // Show the crop box manually\n  crop: function crop() {\n    if (this.ready && !this.cropped && !this.disabled) {\n      this.cropped = true;\n      this.limitCropBox(true, true);\n\n      if (this.options.modal) {\n        addClass(this.dragBox, CLASS_MODAL);\n      }\n\n      removeClass(this.cropBox, CLASS_HIDDEN);\n      this.setCropBoxData(this.initialCropBoxData);\n    }\n\n    return this;\n  },\n  // Reset the image and crop box to their initial states\n  reset: function reset() {\n    if (this.ready && !this.disabled) {\n      this.imageData = assign({}, this.initialImageData);\n      this.canvasData = assign({}, this.initialCanvasData);\n      this.cropBoxData = assign({}, this.initialCropBoxData);\n      this.renderCanvas();\n\n      if (this.cropped) {\n        this.renderCropBox();\n      }\n    }\n\n    return this;\n  },\n  // Clear the crop box\n  clear: function clear() {\n    if (this.cropped && !this.disabled) {\n      assign(this.cropBoxData, {\n        left: 0,\n        top: 0,\n        width: 0,\n        height: 0\n      });\n      this.cropped = false;\n      this.renderCropBox();\n      this.limitCanvas(true, true); // Render canvas after crop box rendered\n\n      this.renderCanvas();\n      removeClass(this.dragBox, CLASS_MODAL);\n      addClass(this.cropBox, CLASS_HIDDEN);\n    }\n\n    return this;\n  },\n\n  /**\n   * Replace the image's src and rebuild the cropper\n   * @param {string} url - The new URL.\n   * @param {boolean} [hasSameSize] - Indicate if the new image has the same size as the old one.\n   * @returns {Cropper} this\n   */\n  replace: function replace(url) {\n    var hasSameSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    if (!this.disabled && url) {\n      if (this.isImg) {\n        this.element.src = url;\n      }\n\n      if (hasSameSize) {\n        this.url = url;\n        this.image.src = url;\n\n        if (this.ready) {\n          this.viewBoxImage.src = url;\n          forEach(this.previews, function (element) {\n            element.getElementsByTagName('img')[0].src = url;\n          });\n        }\n      } else {\n        if (this.isImg) {\n          this.replaced = true;\n        }\n\n        this.options.data = null;\n        this.uncreate();\n        this.load(url);\n      }\n    }\n\n    return this;\n  },\n  // Enable (unfreeze) the cropper\n  enable: function enable() {\n    if (this.ready && this.disabled) {\n      this.disabled = false;\n      removeClass(this.cropper, CLASS_DISABLED);\n    }\n\n    return this;\n  },\n  // Disable (freeze) the cropper\n  disable: function disable() {\n    if (this.ready && !this.disabled) {\n      this.disabled = true;\n      addClass(this.cropper, CLASS_DISABLED);\n    }\n\n    return this;\n  },\n\n  /**\n   * Destroy the cropper and remove the instance from the image\n   * @returns {Cropper} this\n   */\n  destroy: function destroy() {\n    var element = this.element;\n\n    if (!element[NAMESPACE]) {\n      return this;\n    }\n\n    element[NAMESPACE] = undefined;\n\n    if (this.isImg && this.replaced) {\n      element.src = this.originalUrl;\n    }\n\n    this.uncreate();\n    return this;\n  },\n\n  /**\n   * Move the canvas with relative offsets\n   * @param {number} offsetX - The relative offset distance on the x-axis.\n   * @param {number} [offsetY=offsetX] - The relative offset distance on the y-axis.\n   * @returns {Cropper} this\n   */\n  move: function move(offsetX) {\n    var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : offsetX;\n    var _this$canvasData = this.canvasData,\n        left = _this$canvasData.left,\n        top = _this$canvasData.top;\n    return this.moveTo(isUndefined(offsetX) ? offsetX : left + Number(offsetX), isUndefined(offsetY) ? offsetY : top + Number(offsetY));\n  },\n\n  /**\n   * Move the canvas to an absolute point\n   * @param {number} x - The x-axis coordinate.\n   * @param {number} [y=x] - The y-axis coordinate.\n   * @returns {Cropper} this\n   */\n  moveTo: function moveTo(x) {\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n    var canvasData = this.canvasData;\n    var changed = false;\n    x = Number(x);\n    y = Number(y);\n\n    if (this.ready && !this.disabled && this.options.movable) {\n      if (isNumber(x)) {\n        canvasData.left = x;\n        changed = true;\n      }\n\n      if (isNumber(y)) {\n        canvasData.top = y;\n        changed = true;\n      }\n\n      if (changed) {\n        this.renderCanvas(true);\n      }\n    }\n\n    return this;\n  },\n\n  /**\n   * Zoom the canvas with a relative ratio\n   * @param {number} ratio - The target ratio.\n   * @param {Event} _originalEvent - The original event if any.\n   * @returns {Cropper} this\n   */\n  zoom: function zoom(ratio, _originalEvent) {\n    var canvasData = this.canvasData;\n    ratio = Number(ratio);\n\n    if (ratio < 0) {\n      ratio = 1 / (1 - ratio);\n    } else {\n      ratio = 1 + ratio;\n    }\n\n    return this.zoomTo(canvasData.width * ratio / canvasData.naturalWidth, null, _originalEvent);\n  },\n\n  /**\n   * Zoom the canvas to an absolute ratio\n   * @param {number} ratio - The target ratio.\n   * @param {Object} pivot - The zoom pivot point coordinate.\n   * @param {Event} _originalEvent - The original event if any.\n   * @returns {Cropper} this\n   */\n  zoomTo: function zoomTo(ratio, pivot, _originalEvent) {\n    var options = this.options,\n        canvasData = this.canvasData;\n    var width = canvasData.width,\n        height = canvasData.height,\n        naturalWidth = canvasData.naturalWidth,\n        naturalHeight = canvasData.naturalHeight;\n    ratio = Number(ratio);\n\n    if (ratio >= 0 && this.ready && !this.disabled && options.zoomable) {\n      var newWidth = naturalWidth * ratio;\n      var newHeight = naturalHeight * ratio;\n\n      if (dispatchEvent(this.element, EVENT_ZOOM, {\n        ratio: ratio,\n        oldRatio: width / naturalWidth,\n        originalEvent: _originalEvent\n      }) === false) {\n        return this;\n      }\n\n      if (_originalEvent) {\n        var pointers = this.pointers;\n        var offset = getOffset(this.cropper);\n        var center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {\n          pageX: _originalEvent.pageX,\n          pageY: _originalEvent.pageY\n        }; // Zoom from the triggering point of the event\n\n        canvasData.left -= (newWidth - width) * ((center.pageX - offset.left - canvasData.left) / width);\n        canvasData.top -= (newHeight - height) * ((center.pageY - offset.top - canvasData.top) / height);\n      } else if (isPlainObject(pivot) && isNumber(pivot.x) && isNumber(pivot.y)) {\n        canvasData.left -= (newWidth - width) * ((pivot.x - canvasData.left) / width);\n        canvasData.top -= (newHeight - height) * ((pivot.y - canvasData.top) / height);\n      } else {\n        // Zoom from the center of the canvas\n        canvasData.left -= (newWidth - width) / 2;\n        canvasData.top -= (newHeight - height) / 2;\n      }\n\n      canvasData.width = newWidth;\n      canvasData.height = newHeight;\n      this.renderCanvas(true);\n    }\n\n    return this;\n  },\n\n  /**\n   * Rotate the canvas with a relative degree\n   * @param {number} degree - The rotate degree.\n   * @returns {Cropper} this\n   */\n  rotate: function rotate(degree) {\n    return this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n  },\n\n  /**\n   * Rotate the canvas to an absolute degree\n   * @param {number} degree - The rotate degree.\n   * @returns {Cropper} this\n   */\n  rotateTo: function rotateTo(degree) {\n    degree = Number(degree);\n\n    if (isNumber(degree) && this.ready && !this.disabled && this.options.rotatable) {\n      this.imageData.rotate = degree % 360;\n      this.renderCanvas(true, true);\n    }\n\n    return this;\n  },\n\n  /**\n   * Scale the image on the x-axis.\n   * @param {number} scaleX - The scale ratio on the x-axis.\n   * @returns {Cropper} this\n   */\n  scaleX: function scaleX(_scaleX) {\n    var scaleY = this.imageData.scaleY;\n    return this.scale(_scaleX, isNumber(scaleY) ? scaleY : 1);\n  },\n\n  /**\n   * Scale the image on the y-axis.\n   * @param {number} scaleY - The scale ratio on the y-axis.\n   * @returns {Cropper} this\n   */\n  scaleY: function scaleY(_scaleY) {\n    var scaleX = this.imageData.scaleX;\n    return this.scale(isNumber(scaleX) ? scaleX : 1, _scaleY);\n  },\n\n  /**\n   * Scale the image\n   * @param {number} scaleX - The scale ratio on the x-axis.\n   * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n   * @returns {Cropper} this\n   */\n  scale: function scale(scaleX) {\n    var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;\n    var imageData = this.imageData;\n    var transformed = false;\n    scaleX = Number(scaleX);\n    scaleY = Number(scaleY);\n\n    if (this.ready && !this.disabled && this.options.scalable) {\n      if (isNumber(scaleX)) {\n        imageData.scaleX = scaleX;\n        transformed = true;\n      }\n\n      if (isNumber(scaleY)) {\n        imageData.scaleY = scaleY;\n        transformed = true;\n      }\n\n      if (transformed) {\n        this.renderCanvas(true, true);\n      }\n    }\n\n    return this;\n  },\n\n  /**\n   * Get the cropped area position and size data (base on the original image)\n   * @param {boolean} [rounded=false] - Indicate if round the data values or not.\n   * @returns {Object} The result cropped data.\n   */\n  getData: function getData() {\n    var rounded = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    var options = this.options,\n        imageData = this.imageData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData;\n    var data;\n\n    if (this.ready && this.cropped) {\n      data = {\n        x: cropBoxData.left - canvasData.left,\n        y: cropBoxData.top - canvasData.top,\n        width: cropBoxData.width,\n        height: cropBoxData.height\n      };\n      var ratio = imageData.width / imageData.naturalWidth;\n      forEach(data, function (n, i) {\n        data[i] = n / ratio;\n      });\n\n      if (rounded) {\n        // In case rounding off leads to extra 1px in right or bottom border\n        // we should round the top-left corner and the dimension (#343).\n        var bottom = Math.round(data.y + data.height);\n        var right = Math.round(data.x + data.width);\n        data.x = Math.round(data.x);\n        data.y = Math.round(data.y);\n        data.width = right - data.x;\n        data.height = bottom - data.y;\n      }\n    } else {\n      data = {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      };\n    }\n\n    if (options.rotatable) {\n      data.rotate = imageData.rotate || 0;\n    }\n\n    if (options.scalable) {\n      data.scaleX = imageData.scaleX || 1;\n      data.scaleY = imageData.scaleY || 1;\n    }\n\n    return data;\n  },\n\n  /**\n   * Set the cropped area position and size with new data\n   * @param {Object} data - The new data.\n   * @returns {Cropper} this\n   */\n  setData: function setData(data) {\n    var options = this.options,\n        imageData = this.imageData,\n        canvasData = this.canvasData;\n    var cropBoxData = {};\n\n    if (this.ready && !this.disabled && isPlainObject(data)) {\n      var transformed = false;\n\n      if (options.rotatable) {\n        if (isNumber(data.rotate) && data.rotate !== imageData.rotate) {\n          imageData.rotate = data.rotate;\n          transformed = true;\n        }\n      }\n\n      if (options.scalable) {\n        if (isNumber(data.scaleX) && data.scaleX !== imageData.scaleX) {\n          imageData.scaleX = data.scaleX;\n          transformed = true;\n        }\n\n        if (isNumber(data.scaleY) && data.scaleY !== imageData.scaleY) {\n          imageData.scaleY = data.scaleY;\n          transformed = true;\n        }\n      }\n\n      if (transformed) {\n        this.renderCanvas(true, true);\n      }\n\n      var ratio = imageData.width / imageData.naturalWidth;\n\n      if (isNumber(data.x)) {\n        cropBoxData.left = data.x * ratio + canvasData.left;\n      }\n\n      if (isNumber(data.y)) {\n        cropBoxData.top = data.y * ratio + canvasData.top;\n      }\n\n      if (isNumber(data.width)) {\n        cropBoxData.width = data.width * ratio;\n      }\n\n      if (isNumber(data.height)) {\n        cropBoxData.height = data.height * ratio;\n      }\n\n      this.setCropBoxData(cropBoxData);\n    }\n\n    return this;\n  },\n\n  /**\n   * Get the container size data.\n   * @returns {Object} The result container data.\n   */\n  getContainerData: function getContainerData() {\n    return this.ready ? assign({}, this.containerData) : {};\n  },\n\n  /**\n   * Get the image position and size data.\n   * @returns {Object} The result image data.\n   */\n  getImageData: function getImageData() {\n    return this.sized ? assign({}, this.imageData) : {};\n  },\n\n  /**\n   * Get the canvas position and size data.\n   * @returns {Object} The result canvas data.\n   */\n  getCanvasData: function getCanvasData() {\n    var canvasData = this.canvasData;\n    var data = {};\n\n    if (this.ready) {\n      forEach(['left', 'top', 'width', 'height', 'naturalWidth', 'naturalHeight'], function (n) {\n        data[n] = canvasData[n];\n      });\n    }\n\n    return data;\n  },\n\n  /**\n   * Set the canvas position and size with new data.\n   * @param {Object} data - The new canvas data.\n   * @returns {Cropper} this\n   */\n  setCanvasData: function setCanvasData(data) {\n    var canvasData = this.canvasData;\n    var aspectRatio = canvasData.aspectRatio;\n\n    if (this.ready && !this.disabled && isPlainObject(data)) {\n      if (isNumber(data.left)) {\n        canvasData.left = data.left;\n      }\n\n      if (isNumber(data.top)) {\n        canvasData.top = data.top;\n      }\n\n      if (isNumber(data.width)) {\n        canvasData.width = data.width;\n        canvasData.height = data.width / aspectRatio;\n      } else if (isNumber(data.height)) {\n        canvasData.height = data.height;\n        canvasData.width = data.height * aspectRatio;\n      }\n\n      this.renderCanvas(true);\n    }\n\n    return this;\n  },\n\n  /**\n   * Get the crop box position and size data.\n   * @returns {Object} The result crop box data.\n   */\n  getCropBoxData: function getCropBoxData() {\n    var cropBoxData = this.cropBoxData;\n    var data;\n\n    if (this.ready && this.cropped) {\n      data = {\n        left: cropBoxData.left,\n        top: cropBoxData.top,\n        width: cropBoxData.width,\n        height: cropBoxData.height\n      };\n    }\n\n    return data || {};\n  },\n\n  /**\n   * Set the crop box position and size with new data.\n   * @param {Object} data - The new crop box data.\n   * @returns {Cropper} this\n   */\n  setCropBoxData: function setCropBoxData(data) {\n    var cropBoxData = this.cropBoxData;\n    var aspectRatio = this.options.aspectRatio;\n    var widthChanged;\n    var heightChanged;\n\n    if (this.ready && this.cropped && !this.disabled && isPlainObject(data)) {\n      if (isNumber(data.left)) {\n        cropBoxData.left = data.left;\n      }\n\n      if (isNumber(data.top)) {\n        cropBoxData.top = data.top;\n      }\n\n      if (isNumber(data.width) && data.width !== cropBoxData.width) {\n        widthChanged = true;\n        cropBoxData.width = data.width;\n      }\n\n      if (isNumber(data.height) && data.height !== cropBoxData.height) {\n        heightChanged = true;\n        cropBoxData.height = data.height;\n      }\n\n      if (aspectRatio) {\n        if (widthChanged) {\n          cropBoxData.height = cropBoxData.width / aspectRatio;\n        } else if (heightChanged) {\n          cropBoxData.width = cropBoxData.height * aspectRatio;\n        }\n      }\n\n      this.renderCropBox();\n    }\n\n    return this;\n  },\n\n  /**\n   * Get a canvas drawn the cropped image.\n   * @param {Object} [options={}] - The config options.\n   * @returns {HTMLCanvasElement} - The result canvas.\n   */\n  getCroppedCanvas: function getCroppedCanvas() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (!this.ready || !window.HTMLCanvasElement) {\n      return null;\n    }\n\n    var canvasData = this.canvasData;\n    var source = getSourceCanvas(this.image, this.imageData, canvasData, options); // Returns the source canvas if it is not cropped.\n\n    if (!this.cropped) {\n      return source;\n    }\n\n    var _this$getData = this.getData(),\n        initialX = _this$getData.x,\n        initialY = _this$getData.y,\n        initialWidth = _this$getData.width,\n        initialHeight = _this$getData.height;\n\n    var ratio = source.width / Math.floor(canvasData.naturalWidth);\n\n    if (ratio !== 1) {\n      initialX *= ratio;\n      initialY *= ratio;\n      initialWidth *= ratio;\n      initialHeight *= ratio;\n    }\n\n    var aspectRatio = initialWidth / initialHeight;\n    var maxSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: options.maxWidth || Infinity,\n      height: options.maxHeight || Infinity\n    });\n    var minSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: options.minWidth || 0,\n      height: options.minHeight || 0\n    }, 'cover');\n\n    var _getAdjustedSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: options.width || (ratio !== 1 ? source.width : initialWidth),\n      height: options.height || (ratio !== 1 ? source.height : initialHeight)\n    }),\n        width = _getAdjustedSizes.width,\n        height = _getAdjustedSizes.height;\n\n    width = Math.min(maxSizes.width, Math.max(minSizes.width, width));\n    height = Math.min(maxSizes.height, Math.max(minSizes.height, height));\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n    canvas.width = normalizeDecimalNumber(width);\n    canvas.height = normalizeDecimalNumber(height);\n    context.fillStyle = options.fillColor || 'transparent';\n    context.fillRect(0, 0, width, height);\n    var _options$imageSmoothi = options.imageSmoothingEnabled,\n        imageSmoothingEnabled = _options$imageSmoothi === void 0 ? true : _options$imageSmoothi,\n        imageSmoothingQuality = options.imageSmoothingQuality;\n    context.imageSmoothingEnabled = imageSmoothingEnabled;\n\n    if (imageSmoothingQuality) {\n      context.imageSmoothingQuality = imageSmoothingQuality;\n    } // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D.drawImage\n\n\n    var sourceWidth = source.width;\n    var sourceHeight = source.height; // Source canvas parameters\n\n    var srcX = initialX;\n    var srcY = initialY;\n    var srcWidth;\n    var srcHeight; // Destination canvas parameters\n\n    var dstX;\n    var dstY;\n    var dstWidth;\n    var dstHeight;\n\n    if (srcX <= -initialWidth || srcX > sourceWidth) {\n      srcX = 0;\n      srcWidth = 0;\n      dstX = 0;\n      dstWidth = 0;\n    } else if (srcX <= 0) {\n      dstX = -srcX;\n      srcX = 0;\n      srcWidth = Math.min(sourceWidth, initialWidth + srcX);\n      dstWidth = srcWidth;\n    } else if (srcX <= sourceWidth) {\n      dstX = 0;\n      srcWidth = Math.min(initialWidth, sourceWidth - srcX);\n      dstWidth = srcWidth;\n    }\n\n    if (srcWidth <= 0 || srcY <= -initialHeight || srcY > sourceHeight) {\n      srcY = 0;\n      srcHeight = 0;\n      dstY = 0;\n      dstHeight = 0;\n    } else if (srcY <= 0) {\n      dstY = -srcY;\n      srcY = 0;\n      srcHeight = Math.min(sourceHeight, initialHeight + srcY);\n      dstHeight = srcHeight;\n    } else if (srcY <= sourceHeight) {\n      dstY = 0;\n      srcHeight = Math.min(initialHeight, sourceHeight - srcY);\n      dstHeight = srcHeight;\n    }\n\n    var params = [srcX, srcY, srcWidth, srcHeight]; // Avoid \"IndexSizeError\"\n\n    if (dstWidth > 0 && dstHeight > 0) {\n      var scale = width / initialWidth;\n      params.push(dstX * scale, dstY * scale, dstWidth * scale, dstHeight * scale);\n    } // All the numerical parameters should be integer for `drawImage`\n    // https://github.com/fengyuanchen/cropper/issues/476\n\n\n    context.drawImage.apply(context, [source].concat(_toConsumableArray(params.map(function (param) {\n      return Math.floor(normalizeDecimalNumber(param));\n    }))));\n    return canvas;\n  },\n\n  /**\n   * Change the aspect ratio of the crop box.\n   * @param {number} aspectRatio - The new aspect ratio.\n   * @returns {Cropper} this\n   */\n  setAspectRatio: function setAspectRatio(aspectRatio) {\n    var options = this.options;\n\n    if (!this.disabled && !isUndefined(aspectRatio)) {\n      // 0 -> NaN\n      options.aspectRatio = Math.max(0, aspectRatio) || NaN;\n\n      if (this.ready) {\n        this.initCropBox();\n\n        if (this.cropped) {\n          this.renderCropBox();\n        }\n      }\n    }\n\n    return this;\n  },\n\n  /**\n   * Change the drag mode.\n   * @param {string} mode - The new drag mode.\n   * @returns {Cropper} this\n   */\n  setDragMode: function setDragMode(mode) {\n    var options = this.options,\n        dragBox = this.dragBox,\n        face = this.face;\n\n    if (this.ready && !this.disabled) {\n      var croppable = mode === DRAG_MODE_CROP;\n      var movable = options.movable && mode === DRAG_MODE_MOVE;\n      mode = croppable || movable ? mode : DRAG_MODE_NONE;\n      options.dragMode = mode;\n      setData(dragBox, DATA_ACTION, mode);\n      toggleClass(dragBox, CLASS_CROP, croppable);\n      toggleClass(dragBox, CLASS_MOVE, movable);\n\n      if (!options.cropBoxMovable) {\n        // Sync drag mode to crop box when it is not movable\n        setData(face, DATA_ACTION, mode);\n        toggleClass(face, CLASS_CROP, croppable);\n        toggleClass(face, CLASS_MOVE, movable);\n      }\n    }\n\n    return this;\n  }\n};\n\nvar AnotherCropper = WINDOW.Cropper;\n\nvar Cropper = /*#__PURE__*/function () {\n  /**\n   * Create a new Cropper.\n   * @param {Element} element - The target element for cropping.\n   * @param {Object} [options={}] - The configuration options.\n   */\n  function Cropper(element) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Cropper);\n\n    if (!element || !REGEXP_TAG_NAME.test(element.tagName)) {\n      throw new Error('The first argument is required and must be an <img> or <canvas> element.');\n    }\n\n    this.element = element;\n    this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n    this.cropped = false;\n    this.disabled = false;\n    this.pointers = {};\n    this.ready = false;\n    this.reloading = false;\n    this.replaced = false;\n    this.sized = false;\n    this.sizing = false;\n    this.init();\n  }\n\n  _createClass(Cropper, [{\n    key: \"init\",\n    value: function init() {\n      var element = this.element;\n      var tagName = element.tagName.toLowerCase();\n      var url;\n\n      if (element[NAMESPACE]) {\n        return;\n      }\n\n      element[NAMESPACE] = this;\n\n      if (tagName === 'img') {\n        this.isImg = true; // e.g.: \"img/picture.jpg\"\n\n        url = element.getAttribute('src') || '';\n        this.originalUrl = url; // Stop when it's a blank image\n\n        if (!url) {\n          return;\n        } // e.g.: \"https://example.com/img/picture.jpg\"\n\n\n        url = element.src;\n      } else if (tagName === 'canvas' && window.HTMLCanvasElement) {\n        url = element.toDataURL();\n      }\n\n      this.load(url);\n    }\n  }, {\n    key: \"load\",\n    value: function load(url) {\n      var _this = this;\n\n      if (!url) {\n        return;\n      }\n\n      this.url = url;\n      this.imageData = {};\n      var element = this.element,\n          options = this.options;\n\n      if (!options.rotatable && !options.scalable) {\n        options.checkOrientation = false;\n      } // Only IE10+ supports Typed Arrays\n\n\n      if (!options.checkOrientation || !window.ArrayBuffer) {\n        this.clone();\n        return;\n      } // Detect the mime type of the image directly if it is a Data URL\n\n\n      if (REGEXP_DATA_URL.test(url)) {\n        // Read ArrayBuffer from Data URL of JPEG images directly for better performance\n        if (REGEXP_DATA_URL_JPEG.test(url)) {\n          this.read(dataURLToArrayBuffer(url));\n        } else {\n          // Only a JPEG image may contains Exif Orientation information,\n          // the rest types of Data URLs are not necessary to check orientation at all.\n          this.clone();\n        }\n\n        return;\n      } // 1. Detect the mime type of the image by a XMLHttpRequest.\n      // 2. Load the image as ArrayBuffer for reading orientation if its a JPEG image.\n\n\n      var xhr = new XMLHttpRequest();\n      var clone = this.clone.bind(this);\n      this.reloading = true;\n      this.xhr = xhr; // 1. Cross origin requests are only supported for protocol schemes:\n      // http, https, data, chrome, chrome-extension.\n      // 2. Access to XMLHttpRequest from a Data URL will be blocked by CORS policy\n      // in some browsers as IE11 and Safari.\n\n      xhr.onabort = clone;\n      xhr.onerror = clone;\n      xhr.ontimeout = clone;\n\n      xhr.onprogress = function () {\n        // Abort the request directly if it not a JPEG image for better performance\n        if (xhr.getResponseHeader('content-type') !== MIME_TYPE_JPEG) {\n          xhr.abort();\n        }\n      };\n\n      xhr.onload = function () {\n        _this.read(xhr.response);\n      };\n\n      xhr.onloadend = function () {\n        _this.reloading = false;\n        _this.xhr = null;\n      }; // Bust cache when there is a \"crossOrigin\" property to avoid browser cache error\n\n\n      if (options.checkCrossOrigin && isCrossOriginURL(url) && element.crossOrigin) {\n        url = addTimestamp(url);\n      } // The third parameter is required for avoiding side-effect (#682)\n\n\n      xhr.open('GET', url, true);\n      xhr.responseType = 'arraybuffer';\n      xhr.withCredentials = element.crossOrigin === 'use-credentials';\n      xhr.send();\n    }\n  }, {\n    key: \"read\",\n    value: function read(arrayBuffer) {\n      var options = this.options,\n          imageData = this.imageData; // Reset the orientation value to its default value 1\n      // as some iOS browsers will render image with its orientation\n\n      var orientation = resetAndGetOrientation(arrayBuffer);\n      var rotate = 0;\n      var scaleX = 1;\n      var scaleY = 1;\n\n      if (orientation > 1) {\n        // Generate a new URL which has the default orientation value\n        this.url = arrayBufferToDataURL(arrayBuffer, MIME_TYPE_JPEG);\n\n        var _parseOrientation = parseOrientation(orientation);\n\n        rotate = _parseOrientation.rotate;\n        scaleX = _parseOrientation.scaleX;\n        scaleY = _parseOrientation.scaleY;\n      }\n\n      if (options.rotatable) {\n        imageData.rotate = rotate;\n      }\n\n      if (options.scalable) {\n        imageData.scaleX = scaleX;\n        imageData.scaleY = scaleY;\n      }\n\n      this.clone();\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      var element = this.element,\n          url = this.url;\n      var crossOrigin = element.crossOrigin;\n      var crossOriginUrl = url;\n\n      if (this.options.checkCrossOrigin && isCrossOriginURL(url)) {\n        if (!crossOrigin) {\n          crossOrigin = 'anonymous';\n        } // Bust cache when there is not a \"crossOrigin\" property (#519)\n\n\n        crossOriginUrl = addTimestamp(url);\n      }\n\n      this.crossOrigin = crossOrigin;\n      this.crossOriginUrl = crossOriginUrl;\n      var image = document.createElement('img');\n\n      if (crossOrigin) {\n        image.crossOrigin = crossOrigin;\n      }\n\n      image.src = crossOriginUrl || url;\n      image.alt = element.alt || 'The image to crop';\n      this.image = image;\n      image.onload = this.start.bind(this);\n      image.onerror = this.stop.bind(this);\n      addClass(image, CLASS_HIDE);\n      element.parentNode.insertBefore(image, element.nextSibling);\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this2 = this;\n\n      var image = this.image;\n      image.onload = null;\n      image.onerror = null;\n      this.sizing = true; // Match all browsers that use WebKit as the layout engine in iOS devices,\n      // such as Safari for iOS, Chrome for iOS, and in-app browsers.\n\n      var isIOSWebKit = WINDOW.navigator && /(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent);\n\n      var done = function done(naturalWidth, naturalHeight) {\n        assign(_this2.imageData, {\n          naturalWidth: naturalWidth,\n          naturalHeight: naturalHeight,\n          aspectRatio: naturalWidth / naturalHeight\n        });\n        _this2.initialImageData = assign({}, _this2.imageData);\n        _this2.sizing = false;\n        _this2.sized = true;\n\n        _this2.build();\n      }; // Most modern browsers (excepts iOS WebKit)\n\n\n      if (image.naturalWidth && !isIOSWebKit) {\n        done(image.naturalWidth, image.naturalHeight);\n        return;\n      }\n\n      var sizingImage = document.createElement('img');\n      var body = document.body || document.documentElement;\n      this.sizingImage = sizingImage;\n\n      sizingImage.onload = function () {\n        done(sizingImage.width, sizingImage.height);\n\n        if (!isIOSWebKit) {\n          body.removeChild(sizingImage);\n        }\n      };\n\n      sizingImage.src = image.src; // iOS WebKit will convert the image automatically\n      // with its orientation once append it into DOM (#279)\n\n      if (!isIOSWebKit) {\n        sizingImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';\n        body.appendChild(sizingImage);\n      }\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      var image = this.image;\n      image.onload = null;\n      image.onerror = null;\n      image.parentNode.removeChild(image);\n      this.image = null;\n    }\n  }, {\n    key: \"build\",\n    value: function build() {\n      if (!this.sized || this.ready) {\n        return;\n      }\n\n      var element = this.element,\n          options = this.options,\n          image = this.image; // Create cropper elements\n\n      var container = element.parentNode;\n      var template = document.createElement('div');\n      template.innerHTML = TEMPLATE;\n      var cropper = template.querySelector(\".\".concat(NAMESPACE, \"-container\"));\n      var canvas = cropper.querySelector(\".\".concat(NAMESPACE, \"-canvas\"));\n      var dragBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-drag-box\"));\n      var cropBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-crop-box\"));\n      var face = cropBox.querySelector(\".\".concat(NAMESPACE, \"-face\"));\n      this.container = container;\n      this.cropper = cropper;\n      this.canvas = canvas;\n      this.dragBox = dragBox;\n      this.cropBox = cropBox;\n      this.viewBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-view-box\"));\n      this.face = face;\n      canvas.appendChild(image); // Hide the original image\n\n      addClass(element, CLASS_HIDDEN); // Inserts the cropper after to the current image\n\n      container.insertBefore(cropper, element.nextSibling); // Show the image if is hidden\n\n      if (!this.isImg) {\n        removeClass(image, CLASS_HIDE);\n      }\n\n      this.initPreview();\n      this.bind();\n      options.initialAspectRatio = Math.max(0, options.initialAspectRatio) || NaN;\n      options.aspectRatio = Math.max(0, options.aspectRatio) || NaN;\n      options.viewMode = Math.max(0, Math.min(3, Math.round(options.viewMode))) || 0;\n      addClass(cropBox, CLASS_HIDDEN);\n\n      if (!options.guides) {\n        addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-dashed\")), CLASS_HIDDEN);\n      }\n\n      if (!options.center) {\n        addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-center\")), CLASS_HIDDEN);\n      }\n\n      if (options.background) {\n        addClass(cropper, \"\".concat(NAMESPACE, \"-bg\"));\n      }\n\n      if (!options.highlight) {\n        addClass(face, CLASS_INVISIBLE);\n      }\n\n      if (options.cropBoxMovable) {\n        addClass(face, CLASS_MOVE);\n        setData(face, DATA_ACTION, ACTION_ALL);\n      }\n\n      if (!options.cropBoxResizable) {\n        addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-line\")), CLASS_HIDDEN);\n        addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-point\")), CLASS_HIDDEN);\n      }\n\n      this.render();\n      this.ready = true;\n      this.setDragMode(options.dragMode);\n\n      if (options.autoCrop) {\n        this.crop();\n      }\n\n      this.setData(options.data);\n\n      if (isFunction(options.ready)) {\n        addListener(element, EVENT_READY, options.ready, {\n          once: true\n        });\n      }\n\n      dispatchEvent(element, EVENT_READY);\n    }\n  }, {\n    key: \"unbuild\",\n    value: function unbuild() {\n      if (!this.ready) {\n        return;\n      }\n\n      this.ready = false;\n      this.unbind();\n      this.resetPreview();\n      this.cropper.parentNode.removeChild(this.cropper);\n      removeClass(this.element, CLASS_HIDDEN);\n    }\n  }, {\n    key: \"uncreate\",\n    value: function uncreate() {\n      if (this.ready) {\n        this.unbuild();\n        this.ready = false;\n        this.cropped = false;\n      } else if (this.sizing) {\n        this.sizingImage.onload = null;\n        this.sizing = false;\n        this.sized = false;\n      } else if (this.reloading) {\n        this.xhr.onabort = null;\n        this.xhr.abort();\n      } else if (this.image) {\n        this.stop();\n      }\n    }\n    /**\n     * Get the no conflict cropper class.\n     * @returns {Cropper} The cropper class.\n     */\n\n  }], [{\n    key: \"noConflict\",\n    value: function noConflict() {\n      window.Cropper = AnotherCropper;\n      return Cropper;\n    }\n    /**\n     * Change the default options.\n     * @param {Object} options - The new default options.\n     */\n\n  }, {\n    key: \"setDefaults\",\n    value: function setDefaults(options) {\n      assign(DEFAULTS, isPlainObject(options) && options);\n    }\n  }]);\n\n  return Cropper;\n}();\n\nassign(Cropper.prototype, render, preview, events, handlers, change, methods);\n\nexport default Cropper;\n","/**\r\n * A collection of shims that provide minimal functionality of the ES6 collections.\r\n *\r\n * These implementations are not meant to be used outside of the ResizeObserver\r\n * modules as they cover only a limited range of use cases.\r\n */\r\n/* eslint-disable require-jsdoc, valid-jsdoc */\r\nvar MapShim = (function () {\r\n    if (typeof Map !== 'undefined') {\r\n        return Map;\r\n    }\r\n    /**\r\n     * Returns index in provided array that matches the specified key.\r\n     *\r\n     * @param {Array<Array>} arr\r\n     * @param {*} key\r\n     * @returns {number}\r\n     */\r\n    function getIndex(arr, key) {\r\n        var result = -1;\r\n        arr.some(function (entry, index) {\r\n            if (entry[0] === key) {\r\n                result = index;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        return result;\r\n    }\r\n    return /** @class */ (function () {\r\n        function class_1() {\r\n            this.__entries__ = [];\r\n        }\r\n        Object.defineProperty(class_1.prototype, \"size\", {\r\n            /**\r\n             * @returns {boolean}\r\n             */\r\n            get: function () {\r\n                return this.__entries__.length;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        /**\r\n         * @param {*} key\r\n         * @returns {*}\r\n         */\r\n        class_1.prototype.get = function (key) {\r\n            var index = getIndex(this.__entries__, key);\r\n            var entry = this.__entries__[index];\r\n            return entry && entry[1];\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @param {*} value\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.set = function (key, value) {\r\n            var index = getIndex(this.__entries__, key);\r\n            if (~index) {\r\n                this.__entries__[index][1] = value;\r\n            }\r\n            else {\r\n                this.__entries__.push([key, value]);\r\n            }\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.delete = function (key) {\r\n            var entries = this.__entries__;\r\n            var index = getIndex(entries, key);\r\n            if (~index) {\r\n                entries.splice(index, 1);\r\n            }\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.has = function (key) {\r\n            return !!~getIndex(this.__entries__, key);\r\n        };\r\n        /**\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.clear = function () {\r\n            this.__entries__.splice(0);\r\n        };\r\n        /**\r\n         * @param {Function} callback\r\n         * @param {*} [ctx=null]\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.forEach = function (callback, ctx) {\r\n            if (ctx === void 0) { ctx = null; }\r\n            for (var _i = 0, _a = this.__entries__; _i < _a.length; _i++) {\r\n                var entry = _a[_i];\r\n                callback.call(ctx, entry[1], entry[0]);\r\n            }\r\n        };\r\n        return class_1;\r\n    }());\r\n})();\n\n/**\r\n * Detects whether window and document objects are available in current environment.\r\n */\r\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined' && window.document === document;\n\n// Returns global object of a current environment.\r\nvar global$1 = (function () {\r\n    if (typeof global !== 'undefined' && global.Math === Math) {\r\n        return global;\r\n    }\r\n    if (typeof self !== 'undefined' && self.Math === Math) {\r\n        return self;\r\n    }\r\n    if (typeof window !== 'undefined' && window.Math === Math) {\r\n        return window;\r\n    }\r\n    // eslint-disable-next-line no-new-func\r\n    return Function('return this')();\r\n})();\n\n/**\r\n * A shim for the requestAnimationFrame which falls back to the setTimeout if\r\n * first one is not supported.\r\n *\r\n * @returns {number} Requests' identifier.\r\n */\r\nvar requestAnimationFrame$1 = (function () {\r\n    if (typeof requestAnimationFrame === 'function') {\r\n        // It's required to use a bounded function because IE sometimes throws\r\n        // an \"Invalid calling object\" error if rAF is invoked without the global\r\n        // object on the left hand side.\r\n        return requestAnimationFrame.bind(global$1);\r\n    }\r\n    return function (callback) { return setTimeout(function () { return callback(Date.now()); }, 1000 / 60); };\r\n})();\n\n// Defines minimum timeout before adding a trailing call.\r\nvar trailingTimeout = 2;\r\n/**\r\n * Creates a wrapper function which ensures that provided callback will be\r\n * invoked only once during the specified delay period.\r\n *\r\n * @param {Function} callback - Function to be invoked after the delay period.\r\n * @param {number} delay - Delay after which to invoke callback.\r\n * @returns {Function}\r\n */\r\nfunction throttle (callback, delay) {\r\n    var leadingCall = false, trailingCall = false, lastCallTime = 0;\r\n    /**\r\n     * Invokes the original callback function and schedules new invocation if\r\n     * the \"proxy\" was called during current request.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function resolvePending() {\r\n        if (leadingCall) {\r\n            leadingCall = false;\r\n            callback();\r\n        }\r\n        if (trailingCall) {\r\n            proxy();\r\n        }\r\n    }\r\n    /**\r\n     * Callback invoked after the specified delay. It will further postpone\r\n     * invocation of the original function delegating it to the\r\n     * requestAnimationFrame.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function timeoutCallback() {\r\n        requestAnimationFrame$1(resolvePending);\r\n    }\r\n    /**\r\n     * Schedules invocation of the original function.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function proxy() {\r\n        var timeStamp = Date.now();\r\n        if (leadingCall) {\r\n            // Reject immediately following calls.\r\n            if (timeStamp - lastCallTime < trailingTimeout) {\r\n                return;\r\n            }\r\n            // Schedule new call to be in invoked when the pending one is resolved.\r\n            // This is important for \"transitions\" which never actually start\r\n            // immediately so there is a chance that we might miss one if change\r\n            // happens amids the pending invocation.\r\n            trailingCall = true;\r\n        }\r\n        else {\r\n            leadingCall = true;\r\n            trailingCall = false;\r\n            setTimeout(timeoutCallback, delay);\r\n        }\r\n        lastCallTime = timeStamp;\r\n    }\r\n    return proxy;\r\n}\n\n// Minimum delay before invoking the update of observers.\r\nvar REFRESH_DELAY = 20;\r\n// A list of substrings of CSS properties used to find transition events that\r\n// might affect dimensions of observed elements.\r\nvar transitionKeys = ['top', 'right', 'bottom', 'left', 'width', 'height', 'size', 'weight'];\r\n// Check if MutationObserver is available.\r\nvar mutationObserverSupported = typeof MutationObserver !== 'undefined';\r\n/**\r\n * Singleton controller class which handles updates of ResizeObserver instances.\r\n */\r\nvar ResizeObserverController = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserverController.\r\n     *\r\n     * @private\r\n     */\r\n    function ResizeObserverController() {\r\n        /**\r\n         * Indicates whether DOM listeners have been added.\r\n         *\r\n         * @private {boolean}\r\n         */\r\n        this.connected_ = false;\r\n        /**\r\n         * Tells that controller has subscribed for Mutation Events.\r\n         *\r\n         * @private {boolean}\r\n         */\r\n        this.mutationEventsAdded_ = false;\r\n        /**\r\n         * Keeps reference to the instance of MutationObserver.\r\n         *\r\n         * @private {MutationObserver}\r\n         */\r\n        this.mutationsObserver_ = null;\r\n        /**\r\n         * A list of connected observers.\r\n         *\r\n         * @private {Array<ResizeObserverSPI>}\r\n         */\r\n        this.observers_ = [];\r\n        this.onTransitionEnd_ = this.onTransitionEnd_.bind(this);\r\n        this.refresh = throttle(this.refresh.bind(this), REFRESH_DELAY);\r\n    }\r\n    /**\r\n     * Adds observer to observers list.\r\n     *\r\n     * @param {ResizeObserverSPI} observer - Observer to be added.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.addObserver = function (observer) {\r\n        if (!~this.observers_.indexOf(observer)) {\r\n            this.observers_.push(observer);\r\n        }\r\n        // Add listeners if they haven't been added yet.\r\n        if (!this.connected_) {\r\n            this.connect_();\r\n        }\r\n    };\r\n    /**\r\n     * Removes observer from observers list.\r\n     *\r\n     * @param {ResizeObserverSPI} observer - Observer to be removed.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.removeObserver = function (observer) {\r\n        var observers = this.observers_;\r\n        var index = observers.indexOf(observer);\r\n        // Remove observer if it's present in registry.\r\n        if (~index) {\r\n            observers.splice(index, 1);\r\n        }\r\n        // Remove listeners if controller has no connected observers.\r\n        if (!observers.length && this.connected_) {\r\n            this.disconnect_();\r\n        }\r\n    };\r\n    /**\r\n     * Invokes the update of observers. It will continue running updates insofar\r\n     * it detects changes.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.refresh = function () {\r\n        var changesDetected = this.updateObservers_();\r\n        // Continue running updates if changes have been detected as there might\r\n        // be future ones caused by CSS transitions.\r\n        if (changesDetected) {\r\n            this.refresh();\r\n        }\r\n    };\r\n    /**\r\n     * Updates every observer from observers list and notifies them of queued\r\n     * entries.\r\n     *\r\n     * @private\r\n     * @returns {boolean} Returns \"true\" if any observer has detected changes in\r\n     *      dimensions of it's elements.\r\n     */\r\n    ResizeObserverController.prototype.updateObservers_ = function () {\r\n        // Collect observers that have active observations.\r\n        var activeObservers = this.observers_.filter(function (observer) {\r\n            return observer.gatherActive(), observer.hasActive();\r\n        });\r\n        // Deliver notifications in a separate cycle in order to avoid any\r\n        // collisions between observers, e.g. when multiple instances of\r\n        // ResizeObserver are tracking the same element and the callback of one\r\n        // of them changes content dimensions of the observed target. Sometimes\r\n        // this may result in notifications being blocked for the rest of observers.\r\n        activeObservers.forEach(function (observer) { return observer.broadcastActive(); });\r\n        return activeObservers.length > 0;\r\n    };\r\n    /**\r\n     * Initializes DOM listeners.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.connect_ = function () {\r\n        // Do nothing if running in a non-browser environment or if listeners\r\n        // have been already added.\r\n        if (!isBrowser || this.connected_) {\r\n            return;\r\n        }\r\n        // Subscription to the \"Transitionend\" event is used as a workaround for\r\n        // delayed transitions. This way it's possible to capture at least the\r\n        // final state of an element.\r\n        document.addEventListener('transitionend', this.onTransitionEnd_);\r\n        window.addEventListener('resize', this.refresh);\r\n        if (mutationObserverSupported) {\r\n            this.mutationsObserver_ = new MutationObserver(this.refresh);\r\n            this.mutationsObserver_.observe(document, {\r\n                attributes: true,\r\n                childList: true,\r\n                characterData: true,\r\n                subtree: true\r\n            });\r\n        }\r\n        else {\r\n            document.addEventListener('DOMSubtreeModified', this.refresh);\r\n            this.mutationEventsAdded_ = true;\r\n        }\r\n        this.connected_ = true;\r\n    };\r\n    /**\r\n     * Removes DOM listeners.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.disconnect_ = function () {\r\n        // Do nothing if running in a non-browser environment or if listeners\r\n        // have been already removed.\r\n        if (!isBrowser || !this.connected_) {\r\n            return;\r\n        }\r\n        document.removeEventListener('transitionend', this.onTransitionEnd_);\r\n        window.removeEventListener('resize', this.refresh);\r\n        if (this.mutationsObserver_) {\r\n            this.mutationsObserver_.disconnect();\r\n        }\r\n        if (this.mutationEventsAdded_) {\r\n            document.removeEventListener('DOMSubtreeModified', this.refresh);\r\n        }\r\n        this.mutationsObserver_ = null;\r\n        this.mutationEventsAdded_ = false;\r\n        this.connected_ = false;\r\n    };\r\n    /**\r\n     * \"Transitionend\" event handler.\r\n     *\r\n     * @private\r\n     * @param {TransitionEvent} event\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.onTransitionEnd_ = function (_a) {\r\n        var _b = _a.propertyName, propertyName = _b === void 0 ? '' : _b;\r\n        // Detect whether transition may affect dimensions of an element.\r\n        var isReflowProperty = transitionKeys.some(function (key) {\r\n            return !!~propertyName.indexOf(key);\r\n        });\r\n        if (isReflowProperty) {\r\n            this.refresh();\r\n        }\r\n    };\r\n    /**\r\n     * Returns instance of the ResizeObserverController.\r\n     *\r\n     * @returns {ResizeObserverController}\r\n     */\r\n    ResizeObserverController.getInstance = function () {\r\n        if (!this.instance_) {\r\n            this.instance_ = new ResizeObserverController();\r\n        }\r\n        return this.instance_;\r\n    };\r\n    /**\r\n     * Holds reference to the controller's instance.\r\n     *\r\n     * @private {ResizeObserverController}\r\n     */\r\n    ResizeObserverController.instance_ = null;\r\n    return ResizeObserverController;\r\n}());\n\n/**\r\n * Defines non-writable/enumerable properties of the provided target object.\r\n *\r\n * @param {Object} target - Object for which to define properties.\r\n * @param {Object} props - Properties to be defined.\r\n * @returns {Object} Target object.\r\n */\r\nvar defineConfigurable = (function (target, props) {\r\n    for (var _i = 0, _a = Object.keys(props); _i < _a.length; _i++) {\r\n        var key = _a[_i];\r\n        Object.defineProperty(target, key, {\r\n            value: props[key],\r\n            enumerable: false,\r\n            writable: false,\r\n            configurable: true\r\n        });\r\n    }\r\n    return target;\r\n});\n\n/**\r\n * Returns the global object associated with provided element.\r\n *\r\n * @param {Object} target\r\n * @returns {Object}\r\n */\r\nvar getWindowOf = (function (target) {\r\n    // Assume that the element is an instance of Node, which means that it\r\n    // has the \"ownerDocument\" property from which we can retrieve a\r\n    // corresponding global object.\r\n    var ownerGlobal = target && target.ownerDocument && target.ownerDocument.defaultView;\r\n    // Return the local global object if it's not possible extract one from\r\n    // provided element.\r\n    return ownerGlobal || global$1;\r\n});\n\n// Placeholder of an empty content rectangle.\r\nvar emptyRect = createRectInit(0, 0, 0, 0);\r\n/**\r\n * Converts provided string to a number.\r\n *\r\n * @param {number|string} value\r\n * @returns {number}\r\n */\r\nfunction toFloat(value) {\r\n    return parseFloat(value) || 0;\r\n}\r\n/**\r\n * Extracts borders size from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @param {...string} positions - Borders positions (top, right, ...)\r\n * @returns {number}\r\n */\r\nfunction getBordersSize(styles) {\r\n    var positions = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        positions[_i - 1] = arguments[_i];\r\n    }\r\n    return positions.reduce(function (size, position) {\r\n        var value = styles['border-' + position + '-width'];\r\n        return size + toFloat(value);\r\n    }, 0);\r\n}\r\n/**\r\n * Extracts paddings sizes from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @returns {Object} Paddings box.\r\n */\r\nfunction getPaddings(styles) {\r\n    var positions = ['top', 'right', 'bottom', 'left'];\r\n    var paddings = {};\r\n    for (var _i = 0, positions_1 = positions; _i < positions_1.length; _i++) {\r\n        var position = positions_1[_i];\r\n        var value = styles['padding-' + position];\r\n        paddings[position] = toFloat(value);\r\n    }\r\n    return paddings;\r\n}\r\n/**\r\n * Calculates content rectangle of provided SVG element.\r\n *\r\n * @param {SVGGraphicsElement} target - Element content rectangle of which needs\r\n *      to be calculated.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getSVGContentRect(target) {\r\n    var bbox = target.getBBox();\r\n    return createRectInit(0, 0, bbox.width, bbox.height);\r\n}\r\n/**\r\n * Calculates content rectangle of provided HTMLElement.\r\n *\r\n * @param {HTMLElement} target - Element for which to calculate the content rectangle.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getHTMLElementContentRect(target) {\r\n    // Client width & height properties can't be\r\n    // used exclusively as they provide rounded values.\r\n    var clientWidth = target.clientWidth, clientHeight = target.clientHeight;\r\n    // By this condition we can catch all non-replaced inline, hidden and\r\n    // detached elements. Though elements with width & height properties less\r\n    // than 0.5 will be discarded as well.\r\n    //\r\n    // Without it we would need to implement separate methods for each of\r\n    // those cases and it's not possible to perform a precise and performance\r\n    // effective test for hidden elements. E.g. even jQuery's ':visible' filter\r\n    // gives wrong results for elements with width & height less than 0.5.\r\n    if (!clientWidth && !clientHeight) {\r\n        return emptyRect;\r\n    }\r\n    var styles = getWindowOf(target).getComputedStyle(target);\r\n    var paddings = getPaddings(styles);\r\n    var horizPad = paddings.left + paddings.right;\r\n    var vertPad = paddings.top + paddings.bottom;\r\n    // Computed styles of width & height are being used because they are the\r\n    // only dimensions available to JS that contain non-rounded values. It could\r\n    // be possible to utilize the getBoundingClientRect if only it's data wasn't\r\n    // affected by CSS transformations let alone paddings, borders and scroll bars.\r\n    var width = toFloat(styles.width), height = toFloat(styles.height);\r\n    // Width & height include paddings and borders when the 'border-box' box\r\n    // model is applied (except for IE).\r\n    if (styles.boxSizing === 'border-box') {\r\n        // Following conditions are required to handle Internet Explorer which\r\n        // doesn't include paddings and borders to computed CSS dimensions.\r\n        //\r\n        // We can say that if CSS dimensions + paddings are equal to the \"client\"\r\n        // properties then it's either IE, and thus we don't need to subtract\r\n        // anything, or an element merely doesn't have paddings/borders styles.\r\n        if (Math.round(width + horizPad) !== clientWidth) {\r\n            width -= getBordersSize(styles, 'left', 'right') + horizPad;\r\n        }\r\n        if (Math.round(height + vertPad) !== clientHeight) {\r\n            height -= getBordersSize(styles, 'top', 'bottom') + vertPad;\r\n        }\r\n    }\r\n    // Following steps can't be applied to the document's root element as its\r\n    // client[Width/Height] properties represent viewport area of the window.\r\n    // Besides, it's as well not necessary as the <html> itself neither has\r\n    // rendered scroll bars nor it can be clipped.\r\n    if (!isDocumentElement(target)) {\r\n        // In some browsers (only in Firefox, actually) CSS width & height\r\n        // include scroll bars size which can be removed at this step as scroll\r\n        // bars are the only difference between rounded dimensions + paddings\r\n        // and \"client\" properties, though that is not always true in Chrome.\r\n        var vertScrollbar = Math.round(width + horizPad) - clientWidth;\r\n        var horizScrollbar = Math.round(height + vertPad) - clientHeight;\r\n        // Chrome has a rather weird rounding of \"client\" properties.\r\n        // E.g. for an element with content width of 314.2px it sometimes gives\r\n        // the client width of 315px and for the width of 314.7px it may give\r\n        // 314px. And it doesn't happen all the time. So just ignore this delta\r\n        // as a non-relevant.\r\n        if (Math.abs(vertScrollbar) !== 1) {\r\n            width -= vertScrollbar;\r\n        }\r\n        if (Math.abs(horizScrollbar) !== 1) {\r\n            height -= horizScrollbar;\r\n        }\r\n    }\r\n    return createRectInit(paddings.left, paddings.top, width, height);\r\n}\r\n/**\r\n * Checks whether provided element is an instance of the SVGGraphicsElement.\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\r\nvar isSVGGraphicsElement = (function () {\r\n    // Some browsers, namely IE and Edge, don't have the SVGGraphicsElement\r\n    // interface.\r\n    if (typeof SVGGraphicsElement !== 'undefined') {\r\n        return function (target) { return target instanceof getWindowOf(target).SVGGraphicsElement; };\r\n    }\r\n    // If it's so, then check that element is at least an instance of the\r\n    // SVGElement and that it has the \"getBBox\" method.\r\n    // eslint-disable-next-line no-extra-parens\r\n    return function (target) { return (target instanceof getWindowOf(target).SVGElement &&\r\n        typeof target.getBBox === 'function'); };\r\n})();\r\n/**\r\n * Checks whether provided element is a document element (<html>).\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\r\nfunction isDocumentElement(target) {\r\n    return target === getWindowOf(target).document.documentElement;\r\n}\r\n/**\r\n * Calculates an appropriate content rectangle for provided html or svg element.\r\n *\r\n * @param {Element} target - Element content rectangle of which needs to be calculated.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getContentRect(target) {\r\n    if (!isBrowser) {\r\n        return emptyRect;\r\n    }\r\n    if (isSVGGraphicsElement(target)) {\r\n        return getSVGContentRect(target);\r\n    }\r\n    return getHTMLElementContentRect(target);\r\n}\r\n/**\r\n * Creates rectangle with an interface of the DOMRectReadOnly.\r\n * Spec: https://drafts.fxtf.org/geometry/#domrectreadonly\r\n *\r\n * @param {DOMRectInit} rectInit - Object with rectangle's x/y coordinates and dimensions.\r\n * @returns {DOMRectReadOnly}\r\n */\r\nfunction createReadOnlyRect(_a) {\r\n    var x = _a.x, y = _a.y, width = _a.width, height = _a.height;\r\n    // If DOMRectReadOnly is available use it as a prototype for the rectangle.\r\n    var Constr = typeof DOMRectReadOnly !== 'undefined' ? DOMRectReadOnly : Object;\r\n    var rect = Object.create(Constr.prototype);\r\n    // Rectangle's properties are not writable and non-enumerable.\r\n    defineConfigurable(rect, {\r\n        x: x, y: y, width: width, height: height,\r\n        top: y,\r\n        right: x + width,\r\n        bottom: height + y,\r\n        left: x\r\n    });\r\n    return rect;\r\n}\r\n/**\r\n * Creates DOMRectInit object based on the provided dimensions and the x/y coordinates.\r\n * Spec: https://drafts.fxtf.org/geometry/#dictdef-domrectinit\r\n *\r\n * @param {number} x - X coordinate.\r\n * @param {number} y - Y coordinate.\r\n * @param {number} width - Rectangle's width.\r\n * @param {number} height - Rectangle's height.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction createRectInit(x, y, width, height) {\r\n    return { x: x, y: y, width: width, height: height };\r\n}\n\n/**\r\n * Class that is responsible for computations of the content rectangle of\r\n * provided DOM element and for keeping track of it's changes.\r\n */\r\nvar ResizeObservation = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of ResizeObservation.\r\n     *\r\n     * @param {Element} target - Element to be observed.\r\n     */\r\n    function ResizeObservation(target) {\r\n        /**\r\n         * Broadcasted width of content rectangle.\r\n         *\r\n         * @type {number}\r\n         */\r\n        this.broadcastWidth = 0;\r\n        /**\r\n         * Broadcasted height of content rectangle.\r\n         *\r\n         * @type {number}\r\n         */\r\n        this.broadcastHeight = 0;\r\n        /**\r\n         * Reference to the last observed content rectangle.\r\n         *\r\n         * @private {DOMRectInit}\r\n         */\r\n        this.contentRect_ = createRectInit(0, 0, 0, 0);\r\n        this.target = target;\r\n    }\r\n    /**\r\n     * Updates content rectangle and tells whether it's width or height properties\r\n     * have changed since the last broadcast.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ResizeObservation.prototype.isActive = function () {\r\n        var rect = getContentRect(this.target);\r\n        this.contentRect_ = rect;\r\n        return (rect.width !== this.broadcastWidth ||\r\n            rect.height !== this.broadcastHeight);\r\n    };\r\n    /**\r\n     * Updates 'broadcastWidth' and 'broadcastHeight' properties with a data\r\n     * from the corresponding properties of the last observed content rectangle.\r\n     *\r\n     * @returns {DOMRectInit} Last observed content rectangle.\r\n     */\r\n    ResizeObservation.prototype.broadcastRect = function () {\r\n        var rect = this.contentRect_;\r\n        this.broadcastWidth = rect.width;\r\n        this.broadcastHeight = rect.height;\r\n        return rect;\r\n    };\r\n    return ResizeObservation;\r\n}());\n\nvar ResizeObserverEntry = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of ResizeObserverEntry.\r\n     *\r\n     * @param {Element} target - Element that is being observed.\r\n     * @param {DOMRectInit} rectInit - Data of the element's content rectangle.\r\n     */\r\n    function ResizeObserverEntry(target, rectInit) {\r\n        var contentRect = createReadOnlyRect(rectInit);\r\n        // According to the specification following properties are not writable\r\n        // and are also not enumerable in the native implementation.\r\n        //\r\n        // Property accessors are not being used as they'd require to define a\r\n        // private WeakMap storage which may cause memory leaks in browsers that\r\n        // don't support this type of collections.\r\n        defineConfigurable(this, { target: target, contentRect: contentRect });\r\n    }\r\n    return ResizeObserverEntry;\r\n}());\n\nvar ResizeObserverSPI = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserver.\r\n     *\r\n     * @param {ResizeObserverCallback} callback - Callback function that is invoked\r\n     *      when one of the observed elements changes it's content dimensions.\r\n     * @param {ResizeObserverController} controller - Controller instance which\r\n     *      is responsible for the updates of observer.\r\n     * @param {ResizeObserver} callbackCtx - Reference to the public\r\n     *      ResizeObserver instance which will be passed to callback function.\r\n     */\r\n    function ResizeObserverSPI(callback, controller, callbackCtx) {\r\n        /**\r\n         * Collection of resize observations that have detected changes in dimensions\r\n         * of elements.\r\n         *\r\n         * @private {Array<ResizeObservation>}\r\n         */\r\n        this.activeObservations_ = [];\r\n        /**\r\n         * Registry of the ResizeObservation instances.\r\n         *\r\n         * @private {Map<Element, ResizeObservation>}\r\n         */\r\n        this.observations_ = new MapShim();\r\n        if (typeof callback !== 'function') {\r\n            throw new TypeError('The callback provided as parameter 1 is not a function.');\r\n        }\r\n        this.callback_ = callback;\r\n        this.controller_ = controller;\r\n        this.callbackCtx_ = callbackCtx;\r\n    }\r\n    /**\r\n     * Starts observing provided element.\r\n     *\r\n     * @param {Element} target - Element to be observed.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.observe = function (target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        // Do nothing if current environment doesn't have the Element interface.\r\n        if (typeof Element === 'undefined' || !(Element instanceof Object)) {\r\n            return;\r\n        }\r\n        if (!(target instanceof getWindowOf(target).Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n        var observations = this.observations_;\r\n        // Do nothing if element is already being observed.\r\n        if (observations.has(target)) {\r\n            return;\r\n        }\r\n        observations.set(target, new ResizeObservation(target));\r\n        this.controller_.addObserver(this);\r\n        // Force the update of observations.\r\n        this.controller_.refresh();\r\n    };\r\n    /**\r\n     * Stops observing provided element.\r\n     *\r\n     * @param {Element} target - Element to stop observing.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.unobserve = function (target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        // Do nothing if current environment doesn't have the Element interface.\r\n        if (typeof Element === 'undefined' || !(Element instanceof Object)) {\r\n            return;\r\n        }\r\n        if (!(target instanceof getWindowOf(target).Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n        var observations = this.observations_;\r\n        // Do nothing if element is not being observed.\r\n        if (!observations.has(target)) {\r\n            return;\r\n        }\r\n        observations.delete(target);\r\n        if (!observations.size) {\r\n            this.controller_.removeObserver(this);\r\n        }\r\n    };\r\n    /**\r\n     * Stops observing all elements.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.disconnect = function () {\r\n        this.clearActive();\r\n        this.observations_.clear();\r\n        this.controller_.removeObserver(this);\r\n    };\r\n    /**\r\n     * Collects observation instances the associated element of which has changed\r\n     * it's content rectangle.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.gatherActive = function () {\r\n        var _this = this;\r\n        this.clearActive();\r\n        this.observations_.forEach(function (observation) {\r\n            if (observation.isActive()) {\r\n                _this.activeObservations_.push(observation);\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Invokes initial callback function with a list of ResizeObserverEntry\r\n     * instances collected from active resize observations.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.broadcastActive = function () {\r\n        // Do nothing if observer doesn't have active observations.\r\n        if (!this.hasActive()) {\r\n            return;\r\n        }\r\n        var ctx = this.callbackCtx_;\r\n        // Create ResizeObserverEntry instance for every active observation.\r\n        var entries = this.activeObservations_.map(function (observation) {\r\n            return new ResizeObserverEntry(observation.target, observation.broadcastRect());\r\n        });\r\n        this.callback_.call(ctx, entries, ctx);\r\n        this.clearActive();\r\n    };\r\n    /**\r\n     * Clears the collection of active observations.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.clearActive = function () {\r\n        this.activeObservations_.splice(0);\r\n    };\r\n    /**\r\n     * Tells whether observer has active observations.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ResizeObserverSPI.prototype.hasActive = function () {\r\n        return this.activeObservations_.length > 0;\r\n    };\r\n    return ResizeObserverSPI;\r\n}());\n\n// Registry of internal observers. If WeakMap is not available use current shim\r\n// for the Map collection as it has all required methods and because WeakMap\r\n// can't be fully polyfilled anyway.\r\nvar observers = typeof WeakMap !== 'undefined' ? new WeakMap() : new MapShim();\r\n/**\r\n * ResizeObserver API. Encapsulates the ResizeObserver SPI implementation\r\n * exposing only those methods and properties that are defined in the spec.\r\n */\r\nvar ResizeObserver = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserver.\r\n     *\r\n     * @param {ResizeObserverCallback} callback - Callback that is invoked when\r\n     *      dimensions of the observed elements change.\r\n     */\r\n    function ResizeObserver(callback) {\r\n        if (!(this instanceof ResizeObserver)) {\r\n            throw new TypeError('Cannot call a class as a function.');\r\n        }\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        var controller = ResizeObserverController.getInstance();\r\n        var observer = new ResizeObserverSPI(callback, controller, this);\r\n        observers.set(this, observer);\r\n    }\r\n    return ResizeObserver;\r\n}());\r\n// Expose public methods of ResizeObserver.\r\n[\r\n    'observe',\r\n    'unobserve',\r\n    'disconnect'\r\n].forEach(function (method) {\r\n    ResizeObserver.prototype[method] = function () {\r\n        var _a;\r\n        return (_a = observers.get(this))[method].apply(_a, arguments);\r\n    };\r\n});\n\nvar index = (function () {\r\n    // Export existing implementation if available.\r\n    if (typeof global$1.ResizeObserver !== 'undefined') {\r\n        return global$1.ResizeObserver;\r\n    }\r\n    return ResizeObserver;\r\n})();\n\nexport default index;\n","<script lang=\"ts\">\n\timport { createEventDispatcher, onMount } from \"svelte\";\n\timport { Camera, Circle, Square } from \"@gradio/icons\";\n\n\tlet video_source: HTMLVideoElement;\n\tlet canvas: HTMLCanvasElement;\n\texport let streaming: boolean = false;\n\texport let pending: boolean = false;\n\n\texport let mode: \"image\" | \"video\" = \"image\";\n\texport let mirror_webcam: boolean;\n\texport let include_audio: boolean;\n\n\tconst dispatch = createEventDispatcher();\n\n\tonMount(() => (canvas = document.createElement(\"canvas\")));\n\n\tasync function access_webcam() {\n\t\ttry {\n\t\t\tstream = await navigator.mediaDevices.getUserMedia({\n\t\t\t\tvideo: true,\n\t\t\t\taudio: include_audio\n\t\t\t});\n\t\t\tvideo_source.srcObject = stream;\n\t\t\tvideo_source.muted = true;\n\t\t\tvideo_source.play();\n\t\t} catch (err) {\n\t\t\tif (err instanceof DOMException && err.name == \"NotAllowedError\") {\n\t\t\t\tdispatch(\"error\", \"Please allow access to the webcam for recording.\");\n\t\t\t\treturn null;\n\t\t\t} else {\n\t\t\t\tthrow err;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction take_picture() {\n\t\tvar context = canvas.getContext(\"2d\")!;\n\n\t\tif (video_source.videoWidth && video_source.videoHeight) {\n\t\t\tcanvas.width = video_source.videoWidth;\n\t\t\tcanvas.height = video_source.videoHeight;\n\t\t\tcontext.drawImage(\n\t\t\t\tvideo_source,\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\tvideo_source.videoWidth,\n\t\t\t\tvideo_source.videoHeight\n\t\t\t);\n\n\t\t\tvar data = canvas.toDataURL(\"image/png\");\n\t\t\tdispatch(streaming ? \"stream\" : \"capture\", data);\n\t\t}\n\t}\n\n\tlet recording = false;\n\tlet recorded_blobs: BlobPart[] = [];\n\tlet stream: MediaStream;\n\tlet mimeType: string;\n\tlet media_recorder: MediaRecorder;\n\n\tfunction take_recording() {\n\t\tif (recording) {\n\t\t\tmedia_recorder.stop();\n\t\t\tlet video_blob = new Blob(recorded_blobs, { type: mimeType });\n\t\t\tlet ReaderObj = new FileReader();\n\t\t\tReaderObj.onload = function (e) {\n\t\t\t\tif (e.target) {\n\t\t\t\t\tdispatch(\"capture\", {\n\t\t\t\t\t\tdata: e.target.result,\n\t\t\t\t\t\tname: \"sample.\" + mimeType.substring(6),\n\t\t\t\t\t\tis_example: false\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t\tReaderObj.readAsDataURL(video_blob);\n\t\t} else {\n\t\t\trecorded_blobs = [];\n\t\t\tlet validMimeTypes = [\"video/webm\", \"video/mp4\"];\n\t\t\tfor (let validMimeType of validMimeTypes) {\n\t\t\t\tif (MediaRecorder.isTypeSupported(validMimeType)) {\n\t\t\t\t\tmimeType = validMimeType;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (mimeType === null) {\n\t\t\t\tconsole.error(\"No supported MediaRecorder mimeType\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tmedia_recorder = new MediaRecorder(stream, {\n\t\t\t\tmimeType: mimeType\n\t\t\t});\n\t\t\tmedia_recorder.addEventListener(\"dataavailable\", function (e) {\n\t\t\t\trecorded_blobs.push(e.data);\n\t\t\t});\n\t\t\tmedia_recorder.start(200);\n\t\t}\n\t\trecording = !recording;\n\t}\n\n\taccess_webcam();\n\n\tif (streaming && mode === \"image\") {\n\t\twindow.setInterval(() => {\n\t\t\tif (video_source && !pending) {\n\t\t\t\ttake_picture();\n\t\t\t}\n\t\t}, 500);\n\t}\n</script>\n\n<div class=\"wrap\">\n\t<!-- svelte-ignore a11y-media-has-caption -->\n\t<video bind:this={video_source} class:flip={mirror_webcam} />\n\t{#if !streaming}\n\t\t<button on:click={mode === \"image\" ? take_picture : take_recording}>\n\t\t\t{#if mode === \"video\"}\n\t\t\t\t{#if recording}\n\t\t\t\t\t<div class=\"icon\">\n\t\t\t\t\t\t<Square />\n\t\t\t\t\t</div>\n\t\t\t\t{:else}\n\t\t\t\t\t<div class=\"icon \">\n\t\t\t\t\t\t<Circle />\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t{:else}\n\t\t\t\t<div class=\"icon\">\n\t\t\t\t\t<Camera />\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</button>\n\t{/if}\n</div>\n\n<style>\n\t.wrap {\n\t\tposition: relative;\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t\tmin-height: var(--size-60);\n\t}\n\n\tvideo {\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t}\n\n\tbutton {\n\t\tdisplay: flex;\n\t\tposition: absolute;\n\t\tright: 0px;\n\t\tbottom: var(--size-2);\n\t\tleft: 0px;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tmargin: auto;\n\t\tbox-shadow: var(--shadow-drop-lg);\n\t\tborder-radius: var(--radius-xl);\n\t\tbackground-color: rgba(0, 0, 0, 0.9);\n\t\twidth: var(--size-10);\n\t\theight: var(--size-10);\n\t}\n\n\t@media (--screen-md) {\n\t\tbutton {\n\t\t\tbottom: var(--size-4);\n\t\t}\n\t}\n\n\t@media (--screen-xl) {\n\t\tbutton {\n\t\t\tbottom: var(--size-8);\n\t\t}\n\t}\n\n\t.icon {\n\t\topacity: 0.8;\n\t\twidth: 50%;\n\t\theight: 50%;\n\t\tcolor: white;\n\t}\n\n\t.flip {\n\t\ttransform: scaleX(-1);\n\t}\n</style>\n"],"names":[],"mappings":"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"}