import{S as de,i as he,s as ge,H as I,G as M,C as b,M as L,g as q,J as U,F as te,q as S,a0 as me,y as oe,b as P,I as $,K as be,f as rt,a9 as it,a as le,e as V,E as N,m as Z,k as ne,p as T,l as W,t as C,o as X,n as Q,r as ze,B as x,T as K,z as ce,A as _e,x as ut,$ as ft,af as je,h as ot,j as ct,a8 as _t}from"./index-7c0e54a6.js";import{U as dt}from"./Upload-f28774c6.js";import{a as He}from"./Button-661a0701.js";/* empty css                                                    */import"./ModifyUpload.svelte_svelte_type_style_lang-ba6baa96.js";import{d as ht}from"./dsv-576afacd.js";var De=Object.prototype.hasOwnProperty;function ae(a,e){var t,n;if(a===e)return!0;if(a&&e&&(t=a.constructor)===e.constructor){if(t===Date)return a.getTime()===e.getTime();if(t===RegExp)return a.toString()===e.toString();if(t===Array){if((n=a.length)===e.length)for(;n--&&ae(a[n],e[n]););return n===-1}if(!t||typeof a=="object"){n=0;for(t in a)if(De.call(a,t)&&++n&&!De.call(e,t)||!(t in e)||!ae(a[t],e[t]))return!1;return Object.keys(e).length===n}}return a!==a&&e!==e}function Ee(a){let e,t,n;return{c(){e=M("input"),b(e,"tabindex","-1"),e.value=a[0],b(e,"class","svelte-q8uklq"),L(e,"header",a[3])},m(l,r){q(l,e,r),a[7](e),t||(n=[U(e,"keydown",a[6]),U(e,"blur",a[8])],t=!0)},p(l,r){r&1&&e.value!==l[0]&&(e.value=l[0]),r&8&&L(e,"header",l[3])},d(l){l&&S(e),a[7](null),t=!1,me(n)}}}function gt(a){let e;return{c(){e=$(a[0])},m(t,n){q(t,e,n)},p(t,n){n&1&&be(e,t[0])},d(t){t&&S(e)}}}function mt(a){let e,t;return{c(){e=new it(!1),t=rt(),e.a=t},m(n,l){e.m(a[0],n,l),q(n,t,l)},p(n,l){l&1&&e.p(n[0])},d(n){n&&S(t),n&&e.d()}}}function bt(a){let e,t,n,l,r=a[2]&&Ee(a);function o(i,u){return i[4]==="markdown"||i[4]==="html"?mt:gt}let f=o(a),p=f(a);return{c(){r&&r.c(),e=I(),t=M("span"),p.c(),b(t,"tabindex","-1"),b(t,"role","button"),b(t,"class","svelte-q8uklq"),L(t,"edit",a[2])},m(i,u){r&&r.m(i,u),q(i,e,u),q(i,t,u),p.m(t,null),n||(l=U(t,"dblclick",a[5]),n=!0)},p(i,[u]){i[2]?r?r.p(i,u):(r=Ee(i),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),f===(f=o(i))&&p?p.p(i,u):(p.d(1),p=f(i),p&&(p.c(),p.m(t,null))),u&4&&L(t,"edit",i[2])},i:te,o:te,d(i){r&&r.d(i),i&&S(e),i&&S(t),p.d(),n=!1,l()}}}function pt(a,e,t){let{edit:n}=e,{value:l=""}=e,{el:r}=e,{header:o=!1}=e,{datatype:f="str"}=e;function p(g){oe.call(this,a,g)}function i(g){oe.call(this,a,g)}function u(g){P[g?"unshift":"push"](()=>{r=g,t(1,r)})}const m=({currentTarget:g})=>{t(0,l=g.value),g.setAttribute("tabindex","-1")};return a.$$set=g=>{"edit"in g&&t(2,n=g.edit),"value"in g&&t(0,l=g.value),"el"in g&&t(1,r=g.el),"header"in g&&t(3,o=g.header),"datatype"in g&&t(4,f=g.datatype)},[l,r,n,o,f,p,i,u,m]}class Je extends de{constructor(e){super(),he(this,e,pt,bt,ge,{edit:2,value:0,el:1,header:3,datatype:4})}}function Le(a,e,t){const n=a.slice();return n[53]=e[t],n[55]=t,n}function Ne(a,e,t){const n=a.slice();return n[56]=e[t].value,n[57]=e[t].id,n[58]=e,n[59]=t,n}function Me(a,e,t){const n=a.slice();return n[56]=e[t].value,n[57]=e[t].id,n[60]=e,n[55]=t,n}function qe(a){let e,t;return{c(){e=M("p"),t=$(a[1]),b(e,"class","svelte-8hrj8a")},m(n,l){q(n,e,l),N(e,t)},p(n,l){l[0]&2&&be(t,n[1])},d(n){n&&S(e)}}}function Se(a){let e,t;return{c(){e=M("caption"),t=$(a[1]),b(e,"class","sr-only")},m(n,l){q(n,e,l),N(e,t)},p(n,l){l[0]&2&&be(t,n[1])},d(n){n&&S(e)}}}function Te(a,e){let t,n,l,r,o,f,p,i,u,m,g,h=e[57],v,d,B;function y(F){e[30](F,e[57])}function w(){return e[31](e[57])}let D={value:e[56],edit:e[13]===e[57],header:!0};e[10][e[57]].input!==void 0&&(D.el=e[10][e[57]].input),l=new Je({props:D}),P.push(()=>le(l,"el",y)),l.$on("keydown",e[21]),l.$on("dblclick",w);function E(){return e[32](e[55])}const c=()=>e[33](t,h),O=()=>e[33](null,h);return{key:a,first:null,c(){t=M("th"),n=M("div"),V(l.$$.fragment),o=I(),f=M("div"),p=x("svg"),i=x("path"),m=I(),b(i,"d","M4.49999 0L8.3971 6.75H0.602875L4.49999 0Z"),b(p,"width","1em"),b(p,"height","1em"),b(p,"viewBox","0 0 9 7"),b(p,"fill","none"),b(p,"xmlns","http://www.w3.org/2000/svg"),b(p,"class","svelte-8hrj8a"),b(f,"class",u="sort-button "+e[11]+" svelte-8hrj8a"),L(f,"sorted",e[12]===e[55]),L(f,"des",e[12]===e[55]&&e[11]==="des"),b(n,"class","cell-wrap svelte-8hrj8a"),b(t,"aria-sort",g=e[15](e[56],e[12],e[11])),b(t,"class","svelte-8hrj8a"),L(t,"editing",e[13]===e[57]),this.first=t},m(F,R){q(F,t,R),N(t,n),Z(l,n,null),N(n,o),N(n,f),N(f,p),N(p,i),N(t,m),c(),v=!0,d||(B=U(f,"click",E),d=!0)},p(F,R){e=F;const J={};R[0]&256&&(J.value=e[56]),R[0]&8448&&(J.edit=e[13]===e[57]),!r&&R[0]&1280&&(r=!0,J.el=e[10][e[57]].input,ne(()=>r=!1)),l.$set(J),(!v||R[0]&2048&&u!==(u="sort-button "+e[11]+" svelte-8hrj8a"))&&b(f,"class",u),(!v||R[0]&6400)&&L(f,"sorted",e[12]===e[55]),(!v||R[0]&6400)&&L(f,"des",e[12]===e[55]&&e[11]==="des"),(!v||R[0]&6400&&g!==(g=e[15](e[56],e[12],e[11])))&&b(t,"aria-sort",g),h!==e[57]&&(O(),h=e[57],c()),(!v||R[0]&8448)&&L(t,"editing",e[13]===e[57])},i(F){v||(T(l.$$.fragment,F),v=!0)},o(F){C(l.$$.fragment,F),v=!1},d(F){F&&S(t),Q(l),O(),d=!1,B()}}}function Be(a,e){let t,n,l,r,o,f=e[57],p,i,u;function m(E){e[34](E,e[56],e[58],e[59])}function g(E){e[35](E,e[57])}let h={edit:e[7]===e[57],datatype:Array.isArray(e[0])?e[0][e[59]]:e[0]};e[56]!==void 0&&(h.value=e[56]),e[10][e[57]].input!==void 0&&(h.el=e[10][e[57]].input),l=new Je({props:h}),P.push(()=>le(l,"value",m)),P.push(()=>le(l,"el",g));const v=()=>e[36](t,f),d=()=>e[36](null,f);function B(){return e[37](e[57])}function y(){return e[38](e[57])}function w(){return e[39](e[57])}function D(...E){return e[40](e[55],e[59],e[57],...E)}return{key:a,first:null,c(){t=M("td"),n=M("div"),V(l.$$.fragment),b(n,"class","cell-wrap svelte-8hrj8a"),L(n,"border-transparent",e[6]!==e[57]),b(t,"tabindex","0"),b(t,"class","svelte-8hrj8a"),this.first=t},m(E,c){q(E,t,c),N(t,n),Z(l,n,null),v(),p=!0,i||(u=[U(t,"touchstart",B,{passive:!0}),U(t,"click",y),U(t,"dblclick",w),U(t,"keydown",D)],i=!0)},p(E,c){e=E;const O={};c[0]&640&&(O.edit=e[7]===e[57]),c[0]&513&&(O.datatype=Array.isArray(e[0])?e[0][e[59]]:e[0]),!r&&c[0]&512&&(r=!0,O.value=e[56],ne(()=>r=!1)),!o&&c[0]&1536&&(o=!0,O.el=e[10][e[57]].input,ne(()=>o=!1)),l.$set(O),(!p||c[0]&576)&&L(n,"border-transparent",e[6]!==e[57]),f!==e[57]&&(d(),f=e[57],v())},i(E){p||(T(l.$$.fragment,E),p=!0)},o(E){C(l.$$.fragment,E),p=!1},d(E){E&&S(t),Q(l),d(),i=!1,me(u)}}}function Ce(a,e){let t,n=[],l=new Map,r,o,f=e[53];const p=i=>i[57];for(let i=0;i<f.length;i+=1){let u=Ne(e,f,i),m=p(u);l.set(m,n[i]=Be(m,u))}return{key:a,first:null,c(){t=M("tr");for(let i=0;i<n.length;i+=1)n[i].c();r=I(),b(t,"class","svelte-8hrj8a"),this.first=t},m(i,u){q(i,t,u);for(let m=0;m<n.length;m+=1)n[m]&&n[m].m(t,null);N(t,r),o=!0},p(i,u){e=i,u[0]&460481&&(f=e[53],W(),n=ce(n,u,p,1,e,f,l,t,_e,Be,r,Ne),X())},i(i){if(!o){for(let u=0;u<f.length;u+=1)T(n[u]);o=!0}},o(i){for(let u=0;u<n.length;u+=1)C(n[u]);o=!1},d(i){i&&S(t);for(let u=0;u<n.length;u+=1)n[u].d()}}}function wt(a){let e,t,n,l,r=[],o=new Map,f,p,i=[],u=new Map,m,g=a[1]&&a[1].length!==0&&Se(a),h=a[8];const v=y=>y[57];for(let y=0;y<h.length;y+=1){let w=Me(a,h,y),D=v(w);o.set(D,r[y]=Te(D,w))}let d=a[9];const B=y=>y[53];for(let y=0;y<d.length;y+=1){let w=Le(a,d,y),D=B(w);u.set(D,i[y]=Ce(D,w))}return{c(){e=M("table"),g&&g.c(),t=I(),n=M("thead"),l=M("tr");for(let y=0;y<r.length;y+=1)r[y].c();f=I(),p=M("tbody");for(let y=0;y<i.length;y+=1)i[y].c();b(l,"class","svelte-8hrj8a"),b(n,"class","svelte-8hrj8a"),b(p,"class","svelte-8hrj8a"),b(e,"class","svelte-8hrj8a"),L(e,"dragging",a[14])},m(y,w){q(y,e,w),g&&g.m(e,null),N(e,t),N(e,n),N(n,l);for(let D=0;D<r.length;D+=1)r[D]&&r[D].m(l,null);N(e,f),N(e,p);for(let D=0;D<i.length;D+=1)i[D]&&i[D].m(p,null);m=!0},p(y,w){y[1]&&y[1].length!==0?g?g.p(y,w):(g=Se(y),g.c(),g.m(e,t)):g&&(g.d(1),g=null),w[0]&3718400&&(h=y[8],W(),r=ce(r,w,v,1,y,h,o,l,_e,Te,null,Me),X()),w[0]&460481&&(d=y[9],W(),i=ce(i,w,B,1,y,d,u,p,_e,Ce,null,Le),X()),(!m||w[0]&16384)&&L(e,"dragging",y[14])},i(y){if(!m){for(let w=0;w<h.length;w+=1)T(r[w]);for(let w=0;w<d.length;w+=1)T(i[w]);m=!0}},o(y){for(let w=0;w<r.length;w+=1)C(r[w]);for(let w=0;w<i.length;w+=1)C(i[w]);m=!1},d(y){y&&S(e),g&&g.d();for(let w=0;w<r.length;w+=1)r[w].d();for(let w=0;w<i.length;w+=1)i[w].d()}}}function Oe(a){let e,t,n,l=a[3][1]==="dynamic"&&Fe(a),r=a[2][1]==="dynamic"&&Re(a);return{c(){e=M("div"),l&&l.c(),t=I(),r&&r.c(),b(e,"class","controls-wrap svelte-8hrj8a")},m(o,f){q(o,e,f),l&&l.m(e,null),N(e,t),r&&r.m(e,null),n=!0},p(o,f){o[3][1]==="dynamic"?l?(l.p(o,f),f[0]&8&&T(l,1)):(l=Fe(o),l.c(),T(l,1),l.m(e,t)):l&&(W(),C(l,1,1,()=>{l=null}),X()),o[2][1]==="dynamic"?r?(r.p(o,f),f[0]&4&&T(r,1)):(r=Re(o),r.c(),T(r,1),r.m(e,null)):r&&(W(),C(r,1,1,()=>{r=null}),X())},i(o){n||(T(l),T(r),n=!0)},o(o){C(l),C(r),n=!1},d(o){o&&S(e),l&&l.d(),r&&r.d()}}}function Fe(a){let e,t,n;return t=new He({props:{variant:"secondary",size:"sm",$$slots:{default:[kt]},$$scope:{ctx:a}}}),t.$on("click",a[43]),{c(){e=M("span"),V(t.$$.fragment),b(e,"class","button-wrap svelte-8hrj8a")},m(l,r){q(l,e,r),Z(t,e,null),n=!0},p(l,r){const o={};r[1]&1073741824&&(o.$$scope={dirty:r,ctx:l}),t.$set(o)},i(l){n||(T(t.$$.fragment,l),n=!0)},o(l){C(t.$$.fragment,l),n=!1},d(l){l&&S(e),Q(t)}}}function kt(a){let e,t,n;return{c(){e=x("svg"),t=x("path"),n=$(`
						New row`),b(t,"fill","currentColor"),b(t,"d","M24.59 16.59L17 24.17V4h-2v20.17l-7.59-7.58L6 18l10 10l10-10l-1.41-1.41z"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),b(e,"aria-hidden","true"),b(e,"role","img"),b(e,"width","1em"),b(e,"height","1em"),b(e,"preserveAspectRatio","xMidYMid meet"),b(e,"viewBox","0 0 32 32"),b(e,"class","svelte-8hrj8a")},m(l,r){q(l,e,r),N(e,t),q(l,n,r)},p:te,d(l){l&&S(e),l&&S(n)}}}function Re(a){let e,t,n;return t=new He({props:{variant:"secondary",size:"sm",$$slots:{default:[yt]},$$scope:{ctx:a}}}),t.$on("click",a[23]),{c(){e=M("span"),V(t.$$.fragment),b(e,"class","button-wrap svelte-8hrj8a")},m(l,r){q(l,e,r),Z(t,e,null),n=!0},p(l,r){const o={};r[1]&1073741824&&(o.$$scope={dirty:r,ctx:l}),t.$set(o)},i(l){n||(T(t.$$.fragment,l),n=!0)},o(l){C(t.$$.fragment,l),n=!1},d(l){l&&S(e),Q(t)}}}function yt(a){let e,t,n;return{c(){e=x("svg"),t=x("path"),n=$(`
						New column`),b(t,"fill","currentColor"),b(t,"d","m18 6l-1.43 1.393L24.15 15H4v2h20.15l-7.58 7.573L18 26l10-10L18 6z"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),b(e,"aria-hidden","true"),b(e,"role","img"),b(e,"width","1em"),b(e,"height","1em"),b(e,"preserveAspectRatio","xMidYMid meet"),b(e,"viewBox","0 0 32 32"),b(e,"class","svelte-8hrj8a")},m(l,r){q(l,e,r),N(e,t),q(l,n,r)},p:te,d(l){l&&S(e),l&&S(n)}}}function vt(a){let e,t,n,l,r,o,f,p,i,u=a[1]&&a[1].length!==0&&qe(a);function m(v){a[41](v)}let g={flex:!1,center:!1,boundedheight:!1,disable_click:!0,$$slots:{default:[wt]},$$scope:{ctx:a}};a[14]!==void 0&&(g.dragging=a[14]),l=new dt({props:g}),P.push(()=>le(l,"dragging",m)),l.$on("load",a[42]);let h=a[4]&&Oe(a);return{c(){e=M("div"),u&&u.c(),t=I(),n=M("div"),V(l.$$.fragment),o=I(),h&&h.c(),b(n,"class","table-wrap scroll-hide svelte-8hrj8a"),L(n,"dragging",a[14]),L(n,"no-wrap",!a[5]),b(e,"class","svelte-8hrj8a"),L(e,"label",a[1]&&a[1].length!==0)},m(v,d){q(v,e,d),u&&u.m(e,null),N(e,t),N(e,n),Z(l,n,null),N(e,o),h&&h.m(e,null),f=!0,p||(i=[U(window,"click",a[24]),U(window,"touchstart",a[24])],p=!0)},p(v,d){v[1]&&v[1].length!==0?u?u.p(v,d):(u=qe(v),u.c(),u.m(e,t)):u&&(u.d(1),u=null);const B={};d[0]&32707|d[1]&1073741824&&(B.$$scope={dirty:d,ctx:v}),!r&&d[0]&16384&&(r=!0,B.dragging=v[14],ne(()=>r=!1)),l.$set(B),(!f||d[0]&16384)&&L(n,"dragging",v[14]),(!f||d[0]&32)&&L(n,"no-wrap",!v[5]),v[4]?h?(h.p(v,d),d[0]&16&&T(h,1)):(h=Oe(v),h.c(),T(h,1),h.m(e,null)):h&&(W(),C(h,1,1,()=>{h=null}),X()),(!f||d[0]&2)&&L(e,"label",v[1]&&v[1].length!==0)},i(v){f||(T(l.$$.fragment,v),T(h),f=!0)},o(v){C(l.$$.fragment,v),C(h),f=!1},d(v){v&&S(e),u&&u.d(),Q(l),h&&h.d(),p=!1,me(i)}}}function At(a,e){return e.filter(t);function t(n){var l=-1;return a.split(`
`).every(r);function r(o){if(!o)return!0;var f=o.split(n).length;return l<0&&(l=f),l===f&&f>1}}}function jt(a){const e=atob(a.split(",")[1]),t=a.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(e.length),l=new Uint8Array(n);for(let r=0;r<e.length;r++)l[r]=e.charCodeAt(r);return new Blob([n],{type:t})}function Dt(a,e,t){let{datatype:n}=e,{label:l=null}=e,{headers:r=[]}=e,{values:o=[[]]}=e,{col_count:f}=e,{row_count:p}=e,{editable:i=!0}=e,{wrap:u=!1}=e,m=!1;const g=ze();let h=!1;const v=(s,_)=>c[s][_].value;let d={};function B(s){let _=s||[];if(f[1]==="fixed"&&_.length<f[0]){const k=Array(f[0]-_.length).fill("").map((A,j)=>`${j+_.length}`);_=_.concat(k)}return!_||_.length===0?Array(f[0]).fill(0).map((k,A)=>{const j=`h-${A}`;return t(10,d[j]={cell:null,input:null},d),{id:j,value:JSON.stringify(A+1)}}):_.map((k,A)=>{const j=`h-${A}`;return t(10,d[j]={cell:null,input:null},d),{id:j,value:k??""}})}function y(s){const _=s.length>0?s.length:p[0];return Array(p[1]==="fixed"||_<p[0]?p[0]:_).fill(0).map((k,A)=>Array(f[1]==="fixed"?f[0]:s[0].length).fill(0).map((j,H)=>{const Y=`${A}-${H}`;return t(10,d[Y]={input:null,cell:null},d),{value:s?.[A]?.[H]??"",id:Y}}))}let w=B(r),D;async function E(){typeof h=="string"?(await K(),d[h]?.input?.focus()):typeof m=="string"&&(await K(),d[m]?.input?.focus())}let c=[[]],O;function F(s,_,k){if(!_)return"none";if(r[_]===s){if(k==="asc")return"ascending";if(k==="des")return"descending"}}function R(s){return c.reduce((_,k,A)=>{const j=k.reduce((H,Y,ue)=>s===Y.id?ue:H,-1);return j===-1?_:[A,j]},[-1,-1])}async function J(s,_){if(!i||h===s)return;if(_){const[A,j]=R(s);t(9,c[A][j].value="",c)}t(7,h=s),await K();const{input:k}=d[s];k?.focus()}async function pe(s,_,k,A){let j;switch(s.key){case"ArrowRight":if(h)break;s.preventDefault(),j=c[_][k+1],t(6,m=j?j.id:m);break;case"ArrowLeft":if(h)break;s.preventDefault(),j=c[_][k-1],t(6,m=j?j.id:m);break;case"ArrowDown":if(h)break;s.preventDefault(),j=c[_+1],t(6,m=j?j[k].id:m);break;case"ArrowUp":if(h)break;s.preventDefault(),j=c[_-1],t(6,m=j?j[k].id:m);break;case"Escape":if(!i)break;s.preventDefault(),t(6,m=h),t(7,h=!1);break;case"Enter":if(!i)break;if(s.preventDefault(),s.shiftKey){re(_),await K();const[st]=R(A);t(6,m=c[st+1][k].id)}else h===A?t(7,h=!1):J(A);break;case"Backspace":if(!i)break;h||(s.preventDefault(),t(9,c[_][k].value="",c));break;case"Delete":if(!i)break;h||(s.preventDefault(),t(9,c[_][k].value="",c));break;case"Tab":let H=s.shiftKey?-1:1,Y=c[_][k+H],ue=c?.[_+H]?.[H>0?0:w.length-1],fe=Y||ue;fe&&(s.preventDefault(),t(6,m=fe?fe.id:m)),t(7,h=!1);break;default:(!h||h&&h!==A)&&s.key.length===1&&J(A,!0);break}}async function we(s){h!==s&&m!==s&&(t(7,h=!1),t(6,m=s))}async function ke(s,_){if(_==="edit"&&typeof s=="string"&&(await K(),d[s].input?.focus()),_==="edit"&&typeof s=="boolean"&&typeof m=="string"){let k=d[m]?.cell;await K(),k?.focus()}if(_==="select"&&typeof s=="string"){const{cell:k}=d[s];await K(),k?.focus()}}let G,ee;function Ue(s,_){_==="asc"?t(9,c=c.sort((k,A)=>k[s].value<A[s].value?-1:1)):_==="des"&&t(9,c=c.sort((k,A)=>k[s].value>A[s].value?-1:1))}function ye(s){typeof ee!="number"||ee!==s?(t(11,G="asc"),t(12,ee=s)):G==="asc"?t(11,G="des"):G==="des"&&t(11,G="asc"),Ue(s,G)}let z;function ve(){if(typeof m=="string"){const s=d[m].input?.value;if(w.find(_=>_.id===m)){let _=w.find(k=>k.id===m);s&&(_.value=s)}else s&&w.push({id:m,value:s})}}async function se(s,_){!i||f[1]!=="dynamic"||h===s||(t(13,z=s),await K(),d[s].input?.focus(),_&&d[s].input?.select())}function Ie(s){if(i)switch(s.key){case"Escape":case"Enter":case"Tab":s.preventDefault(),t(6,m=z),t(13,z=!1),ve();break}}function re(s){p[1]==="dynamic"&&(c.splice(s?s+1:c.length,0,Array(c[0].length).fill(0).map((_,k)=>{const A=`${c.length}-${k}`;return t(10,d[A]={cell:null,input:null},d),{id:A,value:""}})),t(9,c),t(27,o),t(29,O),t(26,r))}async function Ke(){if(f[1]!=="dynamic")return;for(let _=0;_<c.length;_++){const k=`${_}-${c[_].length}`;t(10,d[k]={cell:null,input:null},d),c[_].push({id:k,value:""})}const s=`h-${w.length}`;t(10,d[s]={cell:null,input:null},d),w.push({id:s,value:`Header ${w.length+1}`}),t(9,c),t(27,o),t(29,O),t(26,r),t(8,w),t(26,r),t(28,D),t(27,o),await K(),se(s,!0)}function Ye(s){typeof h=="string"&&d[h]&&d[h].cell!==s.target&&!d[h].cell?.contains(s?.target)&&t(7,h=!1),typeof z=="string"&&d[z]&&d[z].cell!==s.target&&!d[z].cell?.contains(s.target)&&(t(6,m=z),t(13,z=!1),ve(),t(13,z=!1))}function Ae(s){const _=new FileReader;function k(A){if(!A?.target?.result||typeof A.target.result!="string")return;const[j]=At(A.target.result,[",","	"]),[H,...Y]=ht(j).parseRows(A.target.result);t(8,w=B(f[1]==="fixed"?H.slice(0,f[0]):H)),t(27,o=Y),_.removeEventListener("loadend",k)}_.addEventListener("loadend",k),_.readAsText(s)}let ie=!1;function Ge(s,_){a.$$.not_equal(d[_].input,s)&&(d[_].input=s,t(10,d))}const Pe=s=>se(s),Ve=s=>ye(s);function Ze(s,_){P[s?"unshift":"push"](()=>{d[_].cell=s,t(10,d)})}function Qe(s,_,k,A){k[A].value=s,t(9,c),t(27,o),t(29,O),t(26,r)}function We(s,_){a.$$.not_equal(d[_].input,s)&&(d[_].input=s,t(10,d))}function Xe(s,_){P[s?"unshift":"push"](()=>{d[_].cell=s,t(10,d)})}const xe=s=>J(s),$e=s=>we(s),et=s=>J(s),tt=(s,_,k,A)=>pe(A,s,_,k);function lt(s){ie=s,t(14,ie)}const nt=s=>Ae(jt(s.detail.data)),at=()=>re();return a.$$set=s=>{"datatype"in s&&t(0,n=s.datatype),"label"in s&&t(1,l=s.label),"headers"in s&&t(26,r=s.headers),"values"in s&&t(27,o=s.values),"col_count"in s&&t(2,f=s.col_count),"row_count"in s&&t(3,p=s.row_count),"editable"in s&&t(4,i=s.editable),"wrap"in s&&t(5,u=s.wrap)},a.$$.update=()=>{if(a.$$.dirty[0]&201326592&&(o&&!Array.isArray(o)?(t(26,r=o.headers),t(27,o=o.data.length===0?[Array(r.length).fill("")]:o.data),t(6,m=!1)):o===null&&(t(27,o=[Array(r.length).fill("")]),t(6,m=!1))),a.$$.dirty[0]&64&&m!==!1){const s=m.split("-"),_=parseInt(s[0]),k=parseInt(s[1]);!isNaN(_)&&!isNaN(k)&&g("select",{index:[_,k],value:v(_,k)})}a.$$.dirty[0]&335544320&&(ae(r,D)||(t(8,w=B(r)),t(28,D=r),E())),a.$$.dirty[0]&671088640&&(ae(o,O)||(t(9,c=y(o)),t(29,O=o),E())),a.$$.dirty[0]&768&&w&&g("change",{data:c.map(s=>s.map(({value:_})=>_)),headers:w.map(s=>s.value)}),a.$$.dirty[0]&128&&ke(h,"edit"),a.$$.dirty[0]&64&&ke(m,"select")},[n,l,f,p,i,u,m,h,w,c,d,G,ee,z,ie,F,J,pe,we,ye,se,Ie,re,Ke,Ye,Ae,r,o,D,O,Ge,Pe,Ve,Ze,Qe,We,Xe,xe,$e,et,tt,lt,nt,at]}class Et extends de{constructor(e){super(),he(this,e,Dt,vt,ge,{datatype:0,label:1,headers:26,values:27,col_count:2,row_count:3,editable:4,wrap:5},null,[-1,-1])}}function Lt(a){let e,t,n,l,r,o;const f=[a[11]];let p={};for(let i=0;i<f.length;i+=1)p=ut(p,f[i]);return t=new ft({props:p}),l=new Et({props:{label:a[8],row_count:a[7],col_count:a[6],values:a[0],headers:a[1],editable:a[5]==="dynamic",wrap:a[9],datatype:a[10]}}),l.$on("change",a[14]),l.$on("select",a[15]),{c(){e=M("div"),V(t.$$.fragment),n=I(),V(l.$$.fragment),b(e,"id",a[2]),b(e,"class",r=je(a[3].join(" "))+" svelte-1nw9bhs"),L(e,"hide",!a[4])},m(i,u){q(i,e,u),Z(t,e,null),N(e,n),Z(l,e,null),o=!0},p(i,[u]){const m=u&2048?ot(f,[ct(i[11])]):{};t.$set(m);const g={};u&256&&(g.label=i[8]),u&128&&(g.row_count=i[7]),u&64&&(g.col_count=i[6]),u&1&&(g.values=i[0]),u&2&&(g.headers=i[1]),u&32&&(g.editable=i[5]==="dynamic"),u&512&&(g.wrap=i[9]),u&1024&&(g.datatype=i[10]),l.$set(g),(!o||u&4)&&b(e,"id",i[2]),(!o||u&8&&r!==(r=je(i[3].join(" "))+" svelte-1nw9bhs"))&&b(e,"class",r),(!o||u&24)&&L(e,"hide",!i[4])},i(i){o||(T(t.$$.fragment,i),T(l.$$.fragment,i),o=!0)},o(i){C(t.$$.fragment,i),C(l.$$.fragment,i),o=!1},d(i){i&&S(e),Q(t),Q(l)}}}function Nt(a,e,t){let{headers:n=[]}=e,{elem_id:l=""}=e,{elem_classes:r=[]}=e,{visible:o=!0}=e,{value:f={data:[["","",""]],headers:["1","2","3"]}}=e,p=JSON.stringify(f),{value_is_output:i=!1}=e,{mode:u}=e,{col_count:m}=e,{row_count:g}=e,{label:h=null}=e,{wrap:v}=e,{datatype:d}=e;const B=ze();let{loading_status:y}=e;function w(){B("change",f),i||B("input")}_t(()=>{t(12,i=!1)});const D=({detail:c})=>{t(0,f=c)};function E(c){oe.call(this,a,c)}return a.$$set=c=>{"headers"in c&&t(1,n=c.headers),"elem_id"in c&&t(2,l=c.elem_id),"elem_classes"in c&&t(3,r=c.elem_classes),"visible"in c&&t(4,o=c.visible),"value"in c&&t(0,f=c.value),"value_is_output"in c&&t(12,i=c.value_is_output),"mode"in c&&t(5,u=c.mode),"col_count"in c&&t(6,m=c.col_count),"row_count"in c&&t(7,g=c.row_count),"label"in c&&t(8,h=c.label),"wrap"in c&&t(9,v=c.wrap),"datatype"in c&&t(10,d=c.datatype),"loading_status"in c&&t(11,y=c.loading_status)},a.$$.update=()=>{a.$$.dirty&8193&&JSON.stringify(f)!==p&&(t(13,p=JSON.stringify(f)),w())},[f,n,l,r,o,u,m,g,h,v,d,y,i,p,D,E]}class Mt extends de{constructor(e){super(),he(this,e,Nt,Lt,ge,{headers:1,elem_id:2,elem_classes:3,visible:4,value:0,value_is_output:12,mode:5,col_count:6,row_count:7,label:8,wrap:9,datatype:10,loading_status:11})}}const Ft=Mt,Rt=["static","dynamic"],zt=a=>({type:{payload:"{ data: Array<Array<string | number>>; headers: Array<string> }"},description:{payload:"an object with an array of data and an array of headers"},example_data:a.value});export{Ft as Component,zt as document,Rt as modes};
//# sourceMappingURL=index-8b439108.js.map
