{"version":3,"file":"index.a5a7351b.js","sources":["../../../../ui/packages/form/src/DropdownOptions.svelte","../../../../ui/packages/icons/src/DropdownArrow.svelte","../../../../ui/packages/icons/src/Remove.svelte","../../../../ui/packages/form/src/Dropdown.svelte","../../../../ui/packages/app/src/components/Dropdown/Dropdown.svelte","../../../../ui/packages/app/src/components/Dropdown/index.ts"],"sourcesContent":["<script lang=\"ts\">\n\timport { fly } from \"svelte/transition\";\n\timport { createEventDispatcher } from \"svelte\";\n\texport let value: string | Array<string> | undefined = undefined;\n\texport let filtered: Array<string>;\n\texport let showOptions: boolean = false;\n\texport let activeOption: string;\n\texport let disabled: boolean = false;\n\n\tlet distance_from_top: number;\n\tlet distance_from_bottom: number;\n\tlet input_height: number;\n\tlet refElement: HTMLDivElement;\n\tlet top: string | null, bottom: string | null, max_height: number;\n\t$: {\n\t\tif (showOptions && refElement) {\n\t\t\tdistance_from_top = refElement.getBoundingClientRect().top;\n\t\t\tdistance_from_bottom =\n\t\t\t\twindow.innerHeight - refElement.getBoundingClientRect().bottom;\n\t\t\tinput_height =\n\t\t\t\trefElement.parentElement?.getBoundingClientRect().height || 0;\n\t\t}\n\t\tif (distance_from_bottom > distance_from_top) {\n\t\t\ttop = `${input_height}px`;\n\t\t\tmax_height = distance_from_bottom;\n\t\t\tbottom = null;\n\t\t} else {\n\t\t\tbottom = `${input_height}px`;\n\t\t\tmax_height = distance_from_top - input_height;\n\t\t\ttop = null;\n\t\t}\n\t}\n\n\tconst dispatch = createEventDispatcher();\n</script>\n\n<div class=\"reference\" bind:this={refElement} />\n{#if showOptions && !disabled}\n\t<ul\n\t\tclass=\"options\"\n\t\taria-expanded={showOptions}\n\t\ttransition:fly={{ duration: 200, y: 5 }}\n\t\ton:mousedown|preventDefault={(e) => dispatch(\"change\", e)}\n\t\tstyle:top\n\t\tstyle:bottom\n\t\tstyle:max-height={`calc(${max_height}px - var(--window-padding))`}\n\t>\n\t\t{#each filtered as choice}\n\t\t\t<li\n\t\t\t\tclass=\"item\"\n\t\t\t\trole=\"button\"\n\t\t\t\tclass:selected={value?.includes(choice)}\n\t\t\t\tclass:active={activeOption === choice}\n\t\t\t\tclass:bg-gray-100={activeOption === choice}\n\t\t\t\tclass:dark:bg-gray-600={activeOption === choice}\n\t\t\t\tdata-value={choice}\n\t\t\t\taria-label={choice}\n\t\t\t>\n\t\t\t\t<span\n\t\t\t\t\tclass:hide={!(Array.isArray(value) ? value : [value])?.includes(\n\t\t\t\t\t\tchoice\n\t\t\t\t\t)}\n\t\t\t\t\tclass=\"inner-item pr-1\"\n\t\t\t\t>\n\t\t\t\t\tâœ“\n\t\t\t\t</span>\n\t\t\t\t{choice}\n\t\t\t</li>\n\t\t{/each}\n\t</ul>\n{/if}\n\n<style>\n\t.options {\n\t\t--window-padding: var(--size-8);\n\t\tposition: absolute;\n\t\tz-index: var(--layer-5);\n\t\tmargin-left: 0;\n\t\tbox-shadow: var(--shadow-drop-lg);\n\t\tborder-radius: var(--container-radius);\n\t\tbackground: var(--background-fill-primary);\n\t\twidth: var(--size-full);\n\t\toverflow: auto;\n\t\tcolor: var(--body-text-color);\n\t\tlist-style: none;\n\t}\n\n\t.item {\n\t\tdisplay: flex;\n\t\tcursor: pointer;\n\t\tpadding: var(--size-2);\n\t}\n\n\t.item:hover,\n\t.active {\n\t\tbackground: var(--background-fill-secondary);\n\t}\n\n\t.inner-item {\n\t\tpadding-right: var(--size-1);\n\t}\n\n\t.hide {\n\t\tvisibility: hidden;\n\t}\n</style>\n","<svg\n\tclass=\"dropdown-arrow\"\n\txmlns=\"http://www.w3.org/2000/svg\"\n\twidth=\"18\"\n\theight=\"18\"\n\tviewBox=\"0 0 18 18\"\n>\n\t<path d=\"M5 8l4 4 4-4z\" />\n</svg>\n\n<style>\n\t.dropdown-arrow {\n\t\tfill: var(--body-text-color);\n\t\tmargin-right: var(--size-2);\n\t\twidth: var(--size-5);\n\t}\n</style>\n","<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\twidth=\"16\"\n\theight=\"16\"\n\tviewBox=\"0 0 24 24\"\n>\n\t<path\n\t\td=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\timport DropdownOptions from \"./DropdownOptions.svelte\";\n\timport { createEventDispatcher } from \"svelte\";\n\timport { BlockTitle } from \"@gradio/atoms\";\n\timport { Remove, DropdownArrow } from \"@gradio/icons\";\n\timport type { SelectData } from \"@gradio/utils\";\n\texport let label: string;\n\texport let info: string | undefined = undefined;\n\texport let value: string | Array<string> | undefined;\n\texport let multiselect: boolean = false;\n\texport let max_choices: number;\n\texport let choices: Array<string>;\n\texport let disabled: boolean = false;\n\texport let show_label: boolean;\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange: string | Array<string> | undefined;\n\t\tselect: SelectData;\n\t}>();\n\n\tlet inputValue: string,\n\t\tactiveOption: string,\n\t\tshowOptions = false;\n\n\t$: filtered = choices.filter((o) =>\n\t\tinputValue ? o.toLowerCase().includes(inputValue.toLowerCase()) : o\n\t);\n\t$: if (\n\t\t(activeOption && !filtered.includes(activeOption)) ||\n\t\t(!activeOption && inputValue)\n\t)\n\t\tactiveOption = filtered[0];\n\n\t$: readonly =\n\t\t(!multiselect && typeof value === \"string\" && value.length > 0) ||\n\t\t(multiselect && Array.isArray(value) && value.length === max_choices);\n\n\t// The initial value of value is [] so that can\n\t// cause infinite loops in the non-multiselect case\n\t$: if (!multiselect && !Array.isArray(value)) {\n\t\tdispatch(\"change\", value);\n\t}\n\n\tfunction add(option: string) {\n\t\tif (Array.isArray(value)) {\n\t\t\tif (!max_choices || value.length < max_choices) {\n\t\t\t\tvalue.push(option);\n\t\t\t\tdispatch(\"select\", {\n\t\t\t\t\tindex: choices.indexOf(option),\n\t\t\t\t\tvalue: option,\n\t\t\t\t\tselected: true\n\t\t\t\t});\n\t\t\t\tdispatch(\"change\", value);\n\t\t\t}\n\t\t}\n\t\tvalue = value;\n\t}\n\n\tfunction remove(option: string) {\n\t\tif (Array.isArray(value)) {\n\t\t\tvalue = value.filter((v: string) => v !== option);\n\t\t\tdispatch(\"select\", {\n\t\t\t\tindex: choices.indexOf(option),\n\t\t\t\tvalue: option,\n\t\t\t\tselected: false\n\t\t\t});\n\t\t\tdispatch(\"change\", value);\n\t\t}\n\t}\n\n\tfunction remove_all(e: any) {\n\t\tif (multiselect) {\n\t\t\tvalue = [];\n\t\t} else {\n\t\t\tvalue = \"\";\n\t\t}\n\n\t\tinputValue = \"\";\n\t\te.preventDefault();\n\t\tdispatch(\"change\", value);\n\t}\n\n\tfunction handleOptionMousedown(e: any) {\n\t\tconst option = e.detail.target.dataset.value;\n\t\tinputValue = \"\";\n\n\t\tif (option !== undefined) {\n\t\t\tif (!multiselect) {\n\t\t\t\tvalue = option;\n\t\t\t\tinputValue = \"\";\n\t\t\t\tshowOptions = false;\n\t\t\t\tdispatch(\"select\", {\n\t\t\t\t\tindex: choices.indexOf(option),\n\t\t\t\t\tvalue: option,\n\t\t\t\t\tselected: true\n\t\t\t\t});\n\t\t\t\tdispatch(\"change\", value);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (value?.includes(option)) {\n\t\t\t\tremove(option);\n\t\t\t} else {\n\t\t\t\tadd(option);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction handleKeyup(e: any) {\n\t\tif (e.key === \"Enter\" && activeOption != undefined) {\n\t\t\tif (!multiselect) {\n\t\t\t\tvalue = activeOption;\n\t\t\t\tinputValue = \"\";\n\t\t\t} else if (multiselect && Array.isArray(value)) {\n\t\t\t\tvalue.includes(activeOption) ? remove(activeOption) : add(activeOption);\n\t\t\t\tinputValue = \"\";\n\t\t\t}\n\t\t}\n\t\tif (e.key === \"ArrowUp\" || e.key === \"ArrowDown\") {\n\t\t\tconst increment = e.key === \"ArrowUp\" ? -1 : 1;\n\t\t\tconst calcIndex = filtered.indexOf(activeOption) + increment;\n\t\t\tactiveOption =\n\t\t\t\tcalcIndex < 0\n\t\t\t\t\t? filtered[filtered.length - 1]\n\t\t\t\t\t: calcIndex === filtered.length\n\t\t\t\t\t? filtered[0]\n\t\t\t\t\t: filtered[calcIndex];\n\t\t}\n\t\tif (e.key === \"Escape\") {\n\t\t\tshowOptions = false;\n\t\t}\n\t}\n</script>\n\n<!-- svelte-ignore a11y-label-has-associated-control -->\n<label>\n\t<BlockTitle {show_label} {info}>{label}</BlockTitle>\n\n\t<div class=\"wrap\">\n\t\t<div class=\"wrap-inner\" class:showOptions>\n\t\t\t{#if Array.isArray(value)}\n\t\t\t\t{#each value as s}\n\t\t\t\t\t<div on:click|preventDefault={() => remove(s)} class=\"token\">\n\t\t\t\t\t\t<span>{s}</span>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass:hidden={disabled}\n\t\t\t\t\t\t\tclass=\"token-remove\"\n\t\t\t\t\t\t\ttitle=\"Remove {s}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Remove />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t{:else}\n\t\t\t\t<span class=\"single-select\">{value}</span>\n\t\t\t{/if}\n\t\t\t<div class=\"secondary-wrap\">\n\t\t\t\t<input\n\t\t\t\t\tclass=\"border-none\"\n\t\t\t\t\t{disabled}\n\t\t\t\t\t{readonly}\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tbind:value={inputValue}\n\t\t\t\t\ton:mousedown={() => {\n\t\t\t\t\t\tshowOptions = !showOptions;\n\t\t\t\t\t}}\n\t\t\t\t\ton:focus={() => {\n\t\t\t\t\t\tshowOptions = true;\n\t\t\t\t\t}}\n\t\t\t\t\ton:blur={() => (showOptions = false)}\n\t\t\t\t\ton:keyup={handleKeyup}\n\t\t\t\t/>\n\t\t\t\t<div\n\t\t\t\t\tclass:hide={!value?.length || disabled}\n\t\t\t\t\tclass=\"token-remove remove-all\"\n\t\t\t\t\ttitle=\"Remove All\"\n\t\t\t\t\ton:click={remove_all}\n\t\t\t\t>\n\t\t\t\t\t<Remove />\n\t\t\t\t</div>\n\t\t\t\t<DropdownArrow />\n\t\t\t</div>\n\t\t</div>\n\t\t<DropdownOptions\n\t\t\tbind:value\n\t\t\t{showOptions}\n\t\t\t{filtered}\n\t\t\t{activeOption}\n\t\t\t{disabled}\n\t\t\ton:change={handleOptionMousedown}\n\t\t/>\n\t</div>\n</label>\n\n<style>\n\t.wrap {\n\t\tposition: relative;\n\t\tbox-shadow: var(--input-shadow);\n\t\tborder: var(--input-border-width) solid var(--border-color-primary);\n\t\tborder-radius: var(--input-radius);\n\t\tbackground: var(--input-background-fill);\n\t}\n\n\t.wrap:focus-within {\n\t\tbox-shadow: var(--input-shadow-focus);\n\t\tborder-color: var(--input-border-color-focus);\n\t}\n\n\t.wrap-inner {\n\t\tdisplay: flex;\n\t\tposition: relative;\n\t\tflex-wrap: wrap;\n\t\talign-items: center;\n\t\tgap: var(--checkbox-label-gap);\n\t\tpadding: var(--checkbox-label-gap);\n\t}\n\n\t.token {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\ttransition: var(--button-transition);\n\t\tcursor: pointer;\n\t\tbox-shadow: var(--checkbox-label-shadow);\n\t\tborder: var(--checkbox-label-border-width) solid\n\t\t\tvar(--checkbox-label-border-color);\n\t\tborder-radius: var(--button-small-radius);\n\t\tbackground: var(--checkbox-label-background-fill);\n\t\tpadding: var(--checkbox-label-padding);\n\t\tcolor: var(--checkbox-label-text-color);\n\t\tfont-weight: var(--checkbox-label-text-weight);\n\t\tfont-size: var(--checkbox-label-text-size);\n\t\tline-height: var(--line-md);\n\t}\n\n\t.token > * + * {\n\t\tmargin-left: var(--size-2);\n\t}\n\n\t.token-remove {\n\t\tfill: var(--body-text-color);\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tcursor: pointer;\n\t\tborder: var(--checkbox-border-width) solid var(--border-color-primary);\n\t\tborder-radius: var(--radius-full);\n\t\tbackground: var(--background-fill-primary);\n\t\tpadding: var(--size-0-5);\n\t\twidth: 18px;\n\t\theight: 18px;\n\t}\n\n\t.single-select {\n\t\tmargin: var(--spacing-sm);\n\t\tcolor: var(--body-text-color);\n\t}\n\n\t.secondary-wrap {\n\t\tdisplay: flex;\n\t\tflex: 1 1 0%;\n\t\talign-items: center;\n\t\tborder: none;\n\t\tmin-width: min-content;\n\t}\n\n\tinput {\n\t\tmargin: var(--spacing-sm);\n\t\toutline: none;\n\t\tborder: none;\n\t\tbackground: inherit;\n\t\twidth: var(--size-full);\n\t\tcolor: var(--body-text-color);\n\t\tfont-size: var(--input-text-size);\n\t}\n\n\tinput:disabled {\n\t\tcursor: not-allowed;\n\t}\n\n\t.remove-all {\n\t\tmargin-left: var(--size-1);\n\t\twidth: 20px;\n\t\theight: 20px;\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { Dropdown } from \"@gradio/form\";\n\timport { Block } from \"@gradio/atoms\";\n\timport StatusTracker from \"../StatusTracker/StatusTracker.svelte\";\n\timport type { LoadingStatus } from \"../StatusTracker/types\";\n\timport type { Styles } from \"@gradio/utils\";\n\n\texport let label: string = \"Dropdown\";\n\texport let info: string | undefined = undefined;\n\texport let elem_id: string = \"\";\n\texport let elem_classes: Array<string> = [];\n\texport let visible: boolean = true;\n\texport let value: string | Array<string>;\n\texport let multiselect: boolean = false;\n\texport let max_choices: number;\n\texport let choices: Array<string>;\n\texport let show_label: boolean;\n\texport let style: Styles = {};\n\texport let loading_status: LoadingStatus;\n\n\texport let mode: \"static\" | \"dynamic\";\n\n\tif (multiselect && !value) {\n\t\tvalue = [];\n\t} else if (!value) {\n\t\tvalue = \"\";\n\t}\n</script>\n\n<Block\n\t{visible}\n\t{elem_id}\n\t{elem_classes}\n\tdisable={typeof style.container === \"boolean\" && !style.container}\n>\n\t<StatusTracker {...loading_status} />\n\n\t<Dropdown\n\t\tbind:value\n\t\t{choices}\n\t\t{multiselect}\n\t\t{max_choices}\n\t\t{label}\n\t\t{info}\n\t\t{show_label}\n\t\ton:change\n\t\ton:select\n\t\tdisabled={mode === \"static\"}\n\t/>\n</Block>\n","export { default as Component } from \"./Dropdown.svelte\";\nexport const modes = [\"static\", \"dynamic\"];\n\nexport const document = (config: Record<string, any>) => ({\n\ttype: {\n\t\tpayload: \"string\"\n\t},\n\tdescription: {\n\t\tpayload: \"selected choice\"\n\t},\n\texample_data: config.choices.length ? config.choices[0] : \"\"\n});\n"],"names":[],"mappings":"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"}